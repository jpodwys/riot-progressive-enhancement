(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var e=setTimeout(cleanUpNextTick);draining=!0;for(var n=queue.length;n;){for(currentQueue=queue,queue=[];++queueIndex<n;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,n=queue.length}currentQueue=null,draining=!1,clearTimeout(e)}}function Item(e,n){this.fun=e,this.array=n}function noop(){}var process=module.exports={},queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];queue.push(new Item(e,n)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],2:[function(require,module,exports){
function renderView(e,r){document.querySelector("main").innerHTML="<"+e+"></"+e+">",riot.mount(e,r)}function entriesHandler(e){renderView("entry-list",{entries:e.response})}function entryHandler(e){var r=e.state.data||null;renderView("entry-view",{page:page,entryService:entryService,entry:r||e.response})}function newEntryHandler(){renderView("new-entry",{page:page,entryService:entryService})}function editEntryHandler(e){var r=e.state.data||null;renderView("edit-entry",{page:page,entryService:entryService,entry:r||e.response})}var page=require("page"),entryService=require("./entry-service"),entry=new(require("../../middleware/service-wrapper"))(entryService),riot=require("riot"),entryListTag=require("../tags/entry-list.tag"),entryViewTag=require("../tags/entry-view.tag"),newEntryTag=require("../tags/new-entry.tag"),editEntryTag=require("../tags/edit-entry.tag");page.base("/"),page("/",entry.getAllEntries,entriesHandler),page("entry/:id",entry.getEntryById,entryHandler),page("entry/:id/edit",entry.getEntryById,editEntryHandler),page("new",newEntryHandler),page({dispatch:!1});
},{"../../middleware/service-wrapper":8,"../tags/edit-entry.tag":4,"../tags/entry-list.tag":5,"../tags/entry-view.tag":6,"../tags/new-entry.tag":7,"./entry-service":3,"page":9,"riot":12}],3:[function(require,module,exports){
var promise=require("zousan"),xhr=require("superagent-cache")(null,null,{responseProp:"body"});require("superagent-promise")(xhr,promise),exports.getAllEntries=function(){return xhr.get("/").accept("application/json")._end()},exports.getEntryById=function(e){return xhr.get("/entry/"+e).accept("application/json").end()},exports.createEntry=function(e){return xhr.post("/entry").accept("application/json").send(e).pruneOptions(["content-type"]).end()},exports.updateEntry=function(e){return xhr.put("/entry/"+e.id).accept("application/json").send(e).pruneOptions(["content-type"]).end()},exports.deleteEntry=function(e){return xhr.del("/entry/"+e).accept("application/json").end()};

},{"superagent-cache":14,"superagent-promise":15,"zousan":19}],4:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag2("edit-entry",'<form method="post" action="/entry/{opts.entry.id}?_method=PUT" onsubmit="{edit}"> <input type="hidden" name="id" value="{opts.entry.id}"> <input name="date" value="{opts.entry.date}"> <textarea name="text">{opts.entry.text}</textarea> Is Public: <input type="checkbox" name="isPublic" __checked="{opts.entry.isPublic}"> <input type="submit"> </form>',"","",function(t){function e(){t.entry.date=new Date(t.entry.date).toISOString().slice(0,10),i.update()}var i=this;t.entry.date.toString().indexOf("-")<0&&e(),this.edit=function(e){e.preventDefault();var n={id:i.id.value,date:i.date.value,text:i.text.value,isPublic:i.isPublic.checked};t.entryService.updateEntry(n).then(function(e){t.page.replace("/entry/"+i.id.value,{data:n})})}},"{ }");

},{"riot":12}],5:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag2("entry-list",'<div each="{opts.entries}"> <a href="/entry/{id}">{this.parent.formatDate(date)}</a> <span if="{!isPublic}">Private</span> <span if="{isPublic}">Public</span> <p>{text}</p> </div>',"","",function(t){var i=this;i.formatDate=function(t){return new Date(t).toISOString().slice(0,10)}},"{ }");

},{"riot":12}],6:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag2("entry-view",'<h1>{opts.entry.date}</h1> <span if="{!opts.entry.isPublic}">Private</span> <span if="{opts.entry.isPublic}">Public</span> <div>{opts.entry.text}</div> <form method="post" action="/entry/{opts.entry.id}?_method=DELETE" onsubmit="{del}"> <input type="submit" value="Delete"> </form> <a href="/entry/{opts.entry.id}/edit" onclick="{edit}">Edit</a>',"","",function(t){function e(){t.entry.date=new Date(t.entry.date).toISOString().slice(0,10),n.update()}var n=this;t.entry.date.toString().indexOf("-")<0&&e(),n.edit=function(e){e.preventDefault(),t.page("/entry/"+t.entry.id+"/edit",{data:t.entry})},n.del=function(e){e.preventDefault(),t.entryService.deleteEntry(t.entry.id).then(function(e){t.page("/")})}},"{ }");

},{"riot":12}],7:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag2("new-entry",'<form method="post" action="/entry" onsubmit="{create}"> <input name="date" value="{opts.entry.date}"> <textarea name="text"></textarea> Is Public: <input type="checkbox" name="isPublic" __checked="{opts.entry.isPublic}"> <input type="submit"> </form>',"","",function(e){var t=this;e.entry={date:(new Date).toISOString().slice(0,10)},t.update(),this.create=function(a){a.preventDefault();var i={date:t.date.value,text:t.text.value,isPublic:t.isPublic.checked};e.entryService.createEntry(i).then(function(t){i.id=t.body.id,e.page.replace("/entry/"+t.body.id,{data:i})})}},"{ }");

},{"riot":12}],8:[function(require,module,exports){
function serviceWrapper(e){var r=this,n=Object.keys(e);n.forEach(function(n){r[n]=function(r,t,o){var s=null;s=o?Object.keys(r.body).length?r.body:r.params.id:r.state.entry||r.params.id,e[n](s).then(function(e){r.response=e.body||e,o?o():t()})}})}module.exports=serviceWrapper;

},{}],9:[function(require,module,exports){
(function (process){
"use strict";function page(e,t){if("function"==typeof e)return page("*",e);if("function"==typeof t)for(var n=new Route(e),a=1;a<arguments.length;++a)page.callbacks.push(n.middleware(arguments[a]));else"string"==typeof e?page["string"==typeof t?"redirect":"show"](e,t):page.start(e)}function unhandled(e){if(!e.handled){var t;t=hashbang?base+location.hash.replace("#!",""):location.pathname+location.search,t!==e.canonicalPath&&(page.stop(),e.handled=!1,location.href=e.canonicalPath)}}function decodeURLEncodedURIComponent(e){return"string"!=typeof e?e:decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e}function Context(e,t){"/"===e[0]&&0!==e.indexOf(base)&&(e=base+(hashbang?"#!":"")+e);var n=e.indexOf("?");if(this.canonicalPath=e,this.path=e.replace(base,"")||"/",hashbang&&(this.path=this.path.replace("#!","")||"/"),this.title=document.title,this.state=t||{},this.state.path=e,this.querystring=~n?decodeURLEncodedURIComponent(e.slice(n+1)):"",this.pathname=decodeURLEncodedURIComponent(~n?e.slice(0,n):e),this.params={},this.hash="",!hashbang){if(!~this.path.indexOf("#"))return;var a=this.path.split("#");this.path=a[0],this.hash=decodeURLEncodedURIComponent(a[1])||"",this.querystring=this.querystring.split("#")[0]}}function Route(e,t){t=t||{},this.path="*"===e?"(.*)":e,this.method="GET",this.regexp=pathtoRegexp(this.path,this.keys=[],t.sensitive,t.strict)}function onclick(e){if(1===which(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var t=e.target;t&&"A"!==t.nodeName;)t=t.parentNode;if(t&&"A"===t.nodeName&&!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var n=t.getAttribute("href");if((hashbang||t.pathname!==location.pathname||!t.hash&&"#"!==n)&&!(n&&n.indexOf("mailto:")>-1)&&!t.target&&sameOrigin(t.href)){var a=t.pathname+t.search+(t.hash||"");"undefined"!=typeof process&&a.match(/^\/[a-zA-Z]:\//)&&(a=a.replace(/^\/[a-zA-Z]:\//,"/"));var o=a;0===a.indexOf(base)&&(a=a.substr(base.length)),hashbang&&(a=a.replace("#!","")),base&&o===a||(e.preventDefault(),page.show(o))}}}}function which(e){return e=e||window.event,null===e.which?e.button:e.which}function sameOrigin(e){var t=location.protocol+"//"+location.hostname;return location.port&&(t+=":"+location.port),e&&0===e.indexOf(t)}var pathtoRegexp=require("path-to-regexp");module.exports=page;var clickEvent="undefined"!=typeof document&&document.ontouchstart?"touchstart":"click",location="undefined"!=typeof window&&(window.history.location||window.location),dispatch=!0,decodeURLComponents=!0,base="",running,hashbang=!1,prevContext;page.callbacks=[],page.exits=[],page.current="",page.len=0,page.base=function(e){return 0===arguments.length?base:void(base=e)},page.start=function(e){if(e=e||{},!running&&(running=!0,!1===e.dispatch&&(dispatch=!1),!1===e.decodeURLComponents&&(decodeURLComponents=!1),!1!==e.popstate&&window.addEventListener("popstate",onpopstate,!1),!1!==e.click&&document.addEventListener(clickEvent,onclick,!1),!0===e.hashbang&&(hashbang=!0),dispatch)){var t=hashbang&&~location.hash.indexOf("#!")?location.hash.substr(2)+location.search:location.pathname+location.search+location.hash;page.replace(t,null,!0,dispatch)}},page.stop=function(){running&&(page.current="",page.len=0,running=!1,document.removeEventListener(clickEvent,onclick,!1),window.removeEventListener("popstate",onpopstate,!1))},page.show=function(e,t,n,a){var o=new Context(e,t);return page.current=o.path,!1!==n&&page.dispatch(o),!1!==o.handled&&!1!==a&&o.pushState(),o},page.back=function(e,t){page.len>0?(history.back(),page.len--):e?setTimeout(function(){page.show(e,t)}):setTimeout(function(){page.show(base,t)})},page.redirect=function(e,t){"string"==typeof e&&"string"==typeof t&&page(e,function(e){setTimeout(function(){page.replace(t)},0)}),"string"==typeof e&&"undefined"==typeof t&&setTimeout(function(){page.replace(e)},0)},page.replace=function(e,t,n,a){var o=new Context(e,t);return page.current=o.path,o.init=n,o.save(),!1!==a&&page.dispatch(o),o},page.dispatch=function(e){function t(){var e=page.exits[i++];return e?void e(a,t):n()}function n(){var t=page.callbacks[o++];return e.path!==page.current?void(e.handled=!1):t?void t(e,n):unhandled(e)}var a=prevContext,o=0,i=0;prevContext=e,a?t():n()},page.exit=function(e,t){if("function"==typeof e)return page.exit("*",e);for(var n=new Route(e),a=1;a<arguments.length;++a)page.exits.push(n.middleware(arguments[a]))},page.Context=Context,Context.prototype.pushState=function(){page.len++,history.pushState(this.state,this.title,hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},Context.prototype.save=function(){history.replaceState(this.state,this.title,hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},page.Route=Route,Route.prototype.middleware=function(e){var t=this;return function(n,a){return t.match(n.path,n.params)?e(n,a):void a()}},Route.prototype.match=function(e,t){var n=this.keys,a=e.indexOf("?"),o=~a?e.slice(0,a):e,i=this.regexp.exec(decodeURIComponent(o));if(!i)return!1;for(var s=1,r=i.length;r>s;++s){var h=n[s-1],p=decodeURLEncodedURIComponent(i[s]);void 0===p&&hasOwnProperty.call(t,h.name)||(t[h.name]=p)}return!0};var onpopstate=function(){var e=!1;if("undefined"!=typeof window)return"complete"===document.readyState?e=!0:window.addEventListener("load",function(){setTimeout(function(){e=!0},0)}),function(t){if(e)if(t.state){var n=t.state.path;page.replace(n,t.state)}else page.show(location.pathname+location.hash,void 0,void 0,!1)}}();page.sameOrigin=sameOrigin;

}).call(this,require('_process'))
},{"_process":1,"path-to-regexp":10}],10:[function(require,module,exports){
function parse(e){for(var t,r=[],n=0,o=0,p="";null!=(t=PATH_REGEXP.exec(e));){var a=t[0],i=t[1],s=t.index;if(p+=e.slice(o,s),o=s+a.length,i)p+=i[1];else{p&&(r.push(p),p="");var u=t[2],c=t[3],l=t[4],f=t[5],g=t[6],x=t[7],h="+"===g||"*"===g,m="?"===g||"*"===g,y=u||"/",T=l||f||(x?".*":"[^"+y+"]+?");r.push({name:c||n++,prefix:u||"",delimiter:y,optional:m,repeat:h,pattern:escapeGroup(T)})}}return o<e.length&&(p+=e.substr(o)),p&&r.push(p),r}function compile(e){return tokensToFunction(parse(e))}function tokensToFunction(e){for(var t=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=new RegExp("^"+e[r].pattern+"$"));return function(r){for(var n="",o=r||{},p=0;p<e.length;p++){var a=e[p];if("string"!=typeof a){var i,s=o[a.name];if(null==s){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(isarray(s)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+s+'"');if(0===s.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var u=0;u<s.length;u++){if(i=encodeURIComponent(s[u]),!t[p].test(i))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+i+'"');n+=(0===u?a.prefix:a.delimiter)+i}}else{if(i=encodeURIComponent(s),!t[p].test(i))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+i+'"');n+=a.prefix+i}}else n+=a}return n}}function escapeString(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function escapeGroup(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function attachKeys(e,t){return e.keys=t,e}function flags(e){return e.sensitive?"":"i"}function regexpToRegexp(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return attachKeys(e,t)}function arrayToRegexp(e,t,r){for(var n=[],o=0;o<e.length;o++)n.push(pathToRegexp(e[o],t,r).source);var p=new RegExp("(?:"+n.join("|")+")",flags(r));return attachKeys(p,t)}function stringToRegexp(e,t,r){for(var n=parse(e),o=tokensToRegExp(n,r),p=0;p<n.length;p++)"string"!=typeof n[p]&&t.push(n[p]);return attachKeys(o,t)}function tokensToRegExp(e,t){t=t||{};for(var r=t.strict,n=t.end!==!1,o="",p=e[e.length-1],a="string"==typeof p&&/\/$/.test(p),i=0;i<e.length;i++){var s=e[i];if("string"==typeof s)o+=escapeString(s);else{var u=escapeString(s.prefix),c=s.pattern;s.repeat&&(c+="(?:"+u+c+")*"),c=s.optional?u?"(?:"+u+"("+c+"))?":"("+c+")?":u+"("+c+")",o+=c}}return r||(o=(a?o.slice(0,-2):o)+"(?:\\/(?=$))?"),o+=n?"$":r&&a?"":"(?=\\/|$)",new RegExp("^"+o,flags(t))}function pathToRegexp(e,t,r){return t=t||[],isarray(t)?r||(r={}):(r=t,t=[]),e instanceof RegExp?regexpToRegexp(e,t,r):isarray(e)?arrayToRegexp(e,t,r):stringToRegexp(e,t,r)}var isarray=require("isarray");module.exports=pathToRegexp,module.exports.parse=parse,module.exports.compile=compile,module.exports.tokensToFunction=tokensToFunction,module.exports.tokensToRegExp=tokensToRegExp;var PATH_REGEXP=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");

},{"isarray":11}],11:[function(require,module,exports){
module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};

},{}],12:[function(require,module,exports){
!function(t,e){"use strict";function n(t,e,n){var r={};return r[t.key]=e,t.pos&&(r[t.pos]=n),r}function r(t,e){for(var n=e.length,r=t.length;n>r;){var o=e[--n];e.splice(n,1),o.unmount()}}function o(t,e){Object.keys(t.tags).forEach(function(n){var r=t.tags[n];S(r)?g(r,function(t){_(t,n,e)}):_(r,n,e)})}function i(t,e,n){var r=t._root;for(t._virts=[];r;){var o=r.nextSibling;n?e.insertBefore(r,n._root):e.appendChild(r),t._virts.push(r),r=o}}function u(t,e,n,r){for(var o=t._root,i=0;r>i;i++){var u=o.nextSibling;e.insertBefore(o,n._root),o=u}}function a(t,e,a){v(t,"each");var f,c=typeof y(t,"no-reorder")!==X||v(t,"no-reorder"),l=C(t),p=Q[l]||{tmpl:t.outerHTML},d=et.test(l),g=t.parentNode,h=document.createTextNode(""),m=x(t),b=/option/gi.test(l),w=[],_=[],N="VIRTUAL"==t.tagName;a=it.loopKeys(a),g.insertBefore(h,t),e.one("before-mount",function(){t.parentNode.removeChild(t),g.stub&&(g=e.root)}).on("update",function(){var v=it(a.val,e),y=document.createDocumentFragment();S(v)||(f=v||!1,v=f?Object.keys(v).map(function(t){return n(a,t,v[t])}):[]),v.forEach(function(r,h){var v=c&&r instanceof Object,b=_.indexOf(r),x=~b&&v?b:h,L=w[x];r=!f&&a.key?n(a,r,h):r,!v&&!L||v&&!~b||!L?(L=new s(p,{parent:e,isLoop:!0,hasImpl:!!Q[l],root:d?g:t.cloneNode(),item:r},t.innerHTML),L.mount(),N&&(L._root=L.root.firstChild),h==w.length?N?i(L,y):y.appendChild(L.root):(N?i(L,g,w[h]):g.insertBefore(L.root,w[h].root),_.splice(h,0,r)),w.splice(h,0,L),x=h):L.update(r),x!==h&&v&&(N?u(L,g,w[h],t.childNodes.length):g.insertBefore(L.root,w[h].root),a.pos&&(L[a.pos]=h),w.splice(h,0,w.splice(x,1)[0]),_.splice(h,0,_.splice(x,1)[0]),m||o(L,h)),L._item=r,T(L,"_parent",e)},!0),r(v,w),b?g.appendChild(y):g.insertBefore(y,h),m&&(e.tags[l]=w),_=v.slice()})}function f(t,e,n,r){$(t,function(t){if(1==t.nodeType){if(t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||y(t,"each")?1:0,n){var o=x(t);o&&!t.isLoop&&n.push(N(o,{root:t,parent:e},t.innerHTML,e))}(!t.isLoop||r)&&D(t,e,[])}})}function c(t,e,n){function r(t,e,r){if(it.hasExpr(e)){var o={dom:t,expr:e};n.push(M(o,r))}}$(t,function(t){var n=t.nodeType;if(3==n&&"STYLE"!=t.parentNode.tagName&&r(t,t.nodeValue),1==n){var o=y(t,"each");return o?(a(t,e,o),!1):(g(t.attributes,function(e){var n=e.name,o=n.split("__")[1];return r(t,e.value,{attr:o||n,bool:o}),o?(v(t,n),!1):void 0}),x(t)?!1:void 0)}})}function s(t,n,r){function o(){var t=w&&x?s:y||s;g($.attributes,function(e){l[m(e.name)]=it(e.value,t)}),g(Object.keys(F),function(e){l[m(e)]=it(F[e],t)})}function i(t){for(var e in _)typeof s[e]!==W&&A(s,e)&&(s[e]=t[e])}function u(){s.parent&&x&&g(Object.keys(s.parent),function(t){var e=!E(nt,t)&&E(B,t);(typeof s[t]===W||e)&&(e||B.push(t),s[t]=s.parent[t])})}function a(t){if(g(C,function(e){e[t?"mount":"unmount"]()}),y){var e=t?"on":"off";x?y[e]("unmount",s.unmount):y[e]("update",s.update)[e]("unmount",s.unmount)}}var s=U.observable(this),l=K(n.opts)||{},p=ut(t.tmpl),y=n.parent,x=n.isLoop,w=n.hasImpl,_=O(n.item),N=[],C=[],$=n.root,j=t.fn,k=$.tagName.toLowerCase(),F={},B=[];j&&$._tag&&$._tag.unmount(!0),this.isMounted=!1,$.isLoop=x,$._tag=this,T(this,"_riot_id",++V),M(this,{parent:y,root:$,opts:l,tags:{}},_),g($.attributes,function(t){var e=t.value;it.hasExpr(e)&&(F[t.name]=e)}),p.innerHTML&&!/^(select|optgroup|table|tbody|tr|col(?:group)?)$/.test(k)&&(p.innerHTML=I(p.innerHTML,r)),T(this,"update",function(t){return t=O(t),u(),t&&typeof _===J&&(i(t),_=t),M(s,t),o(),s.trigger("update",t),d(N,s),ft(function(){s.trigger("updated")}),this}),T(this,"mixin",function(){return g(arguments,function(t){var e;t=typeof t===X?U.mixin(t):t,h(t)?(e=new t,t=t.prototype):e=t,g(Object.getOwnPropertyNames(t),function(t){"init"!=t&&(s[t]=h(e[t])?e[t].bind(s):e[t])}),e.init&&e.init.bind(s)()}),this}),T(this,"mount",function(){if(o(),j&&j.call(s,l),c(p,s,N),a(!0),(t.attrs||w)&&(H(t.attrs,function(t,e){b($,t,e)}),c(s.root,s,N)),(!s.parent||x)&&s.update(_),s.trigger("before-mount"),x&&!w)s.root=$=p.firstChild;else{for(;p.firstChild;)$.appendChild(p.firstChild);$.stub&&(s.root=$=y.root)}x&&f(s.root,s.parent,null,!0),!s.parent||s.parent.isMounted?(s.isMounted=!0,s.trigger("mount")):s.parent.one("mount",function(){R(s.root)||(s.parent.isMounted=s.isMounted=!0,s.trigger("mount"))})}),T(this,"unmount",function(t){var n,r=$,o=r.parentNode;if(s.trigger("before-unmount"),Z.splice(Z.indexOf(s),1),this._virts&&g(this._virts,function(t){t.parentNode.removeChild(t)}),o){if(y)n=L(y),S(n.tags[k])?g(n.tags[k],function(t,e){t._riot_id==s._riot_id&&n.tags[k].splice(e,1)}):n.tags[k]=e;else for(;r.firstChild;)r.removeChild(r.firstChild);t?v(o,"riot-tag"):o.removeChild(r)}s.trigger("unmount"),a(),s.off("*"),s.isMounted=!1,$._tag=null}),f(p,this,C)}function l(e,n,r,o){r[e]=function(e){var i,u=o._parent,a=o._item;if(!a)for(;u&&!a;)a=u._item,u=u._parent;e=e||t.event,A(e,"currentTarget")&&(e.currentTarget=r),A(e,"target")&&(e.target=e.srcElement),A(e,"which")&&(e.which=e.charCode||e.keyCode),e.item=a,n.call(o,e)===!0||/radio|check/.test(r.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),e.preventUpdate||(i=a?L(u):o,i.update())}}function p(t,e,n){t&&(t.insertBefore(n,e),t.removeChild(e))}function d(t,e){g(t,function(t,n){var r=t.dom,o=t.attr,i=it(t.expr,e),u=t.dom.parentNode;if(t.bool?i=i?o:!1:null==i&&(i=""),u&&"TEXTAREA"==u.tagName&&(i=(""+i).replace(/riot-/g,""),u.value=i),t.value!==i){if(t.value=i,!o)return void(r.nodeValue=""+i);if(v(r,o),h(i))l(o,i,r,e);else if("if"==o){var a=t.stub,f=function(){p(a.parentNode,a,r)},c=function(){p(r.parentNode,r,a)};i?a&&(f(),r.inStub=!1,R(r)||$(r,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(a=t.stub=a||document.createTextNode(""),r.parentNode?c():(e.parent||e).one("updated",c),r.inStub=!0)}else if(/^(show|hide)$/.test(o))"hide"==o&&(i=!i),r.style.display=i?"":"none";else if("value"==o)r.value=i;else if(P(o,Y)&&o!=G)i&&b(r,o.slice(Y.length),i);else{if(t.bool&&(r[o]=i,!i))return;i&&0!=i&&typeof i!==J&&b(r,o,i)}}})}function g(t,e){for(var n,r=0,o=(t||[]).length;o>r;r++)n=t[r],null!=n&&e(n,r)===!1&&r--;return t}function h(t){return typeof t===tt||!1}function v(t,e){t.removeAttribute(e)}function m(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function y(t,e){return t.getAttribute(e)}function b(t,e,n){t.setAttribute(e,n)}function x(t){return t.tagName&&Q[y(t,G)||t.tagName.toLowerCase()]}function w(t,e,n){var r=n.tags[e];r?(S(r)||r!==t&&(n.tags[e]=[r]),E(n.tags[e],t)||n.tags[e].push(t)):n.tags[e]=t}function _(t,e,n){var r,o=t.parent;o&&(r=o.tags[e],S(r)?r.splice(n,0,r.splice(r.indexOf(t),1)[0]):w(t,e,o))}function N(t,e,n,r){var o=new s(t,e,n),i=C(e.root),u=L(r);return o.parent=u,o._parent=r,w(o,i,u),u!==r&&w(o,i,r),e.root.innerHTML="",o}function L(t){for(var e=t;!x(e.root)&&e.parent;)e=e.parent;return e}function T(t,e,n,r){return Object.defineProperty(t,e,M({value:n,enumerable:!1,writable:!1,configurable:!1},r)),t}function C(t){var e=x(t),n=y(t,"name"),r=n&&!it.hasExpr(n)?n:e?e.name:t.tagName.toLowerCase();return r}function M(t){for(var e,n=arguments,r=1;r<n.length;++r)if(e=n[r])for(var o in e)A(t,o)&&(t[o]=e[o]);return t}function E(t,e){return~t.indexOf(e)}function S(t){return Array.isArray(t)||t instanceof Array}function A(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return typeof t[e]===W||n&&n.writable}function O(t){if(!(t instanceof s||t&&typeof t.trigger==tt))return t;var e={};for(var n in t)E(nt,n)||(e[n]=t[n]);return e}function $(t,e){if(t){if(e(t)===!1)return;for(t=t.firstChild;t;)$(t,e),t=t.nextSibling}}function H(t,e){for(var n,r=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;n=r.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function R(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function j(t){return document.createElement(t)}function k(t,e){var n=j(t);return n.innerHTML=e||"",n}function I(t,e){var n=k("div",t);return n.querySelector&&n.querySelector("yield[from]")?(g(k("div",e).childNodes,function(t){1==t.nodeType&&"YIELD"==t.tagName&&t.getAttribute("to")&&g(F('yield[from="'+t.getAttribute("to")+'"]',n),function(e){e.outerHTML=t.innerHTML})}),n.innerHTML):t.replace(/<yield\s*(?:\/>|>\s*<\/yield\s*>)/gi,e||"")}function F(t,e){return(e||document).querySelectorAll(t)}function B(t,e){return(e||document).querySelector(t)}function K(t){function e(){}return e.prototype=t,new e}function q(t){return y(t,"id")||y(t,"name")}function D(t,e,n){var r=q(t),o=function(o){if(!E(n,r)){var i=S(o);o?(!i||i&&!E(o,t))&&(i?o.push(t):e[r]=[o,t]):e[r]=t}};r&&(it.hasExpr(r)?e.one("updated",function(){r=q(t),o(e[r])}):o(e[r]))}function P(t,e){return t.slice(0,e.length)===e}function z(t,e,n){var r=Q[e],o=t._innerHTML=t._innerHTML||t.innerHTML;return t.innerHTML="",r&&t&&(r=new s(r,{root:t,opts:n},o)),r&&r.mount&&(r.mount(),E(Z,r)||Z.push(r)),r}var U={version:"v2.3.12",settings:{}},V=0,Z=[],Q={},Y="riot-",G=Y+"tag",X="string",J="object",W="undefined",tt="function",et=/^(?:opt(ion|group)|tbody|col|t[rhd])$/,nt=["_item","_id","_parent","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],rt=0|(t&&t.document||{}).documentMode;U.observable=function(t){t=t||{};var e={},n=function(t,e){t.replace(/\S+/g,e)},r=function(e,n){Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!1,configurable:!1})};return r("on",function(r,o){return"function"!=typeof o?t:(n(r,function(t,n){(e[t]=e[t]||[]).push(o),o.typed=n>0}),t)}),r("off",function(r,o){return"*"==r?e={}:n(r,function(t){if(o)for(var n,r=e[t],i=0;n=r&&r[i];++i)n==o&&r.splice(i--,1);else delete e[t]}),t}),r("one",function(e,n){function r(){t.off(e,r),n.apply(t,arguments)}return t.on(e,r)}),r("trigger",function(r){for(var o=arguments.length-1,i=new Array(o),u=0;o>u;u++)i[u]=arguments[u+1];return n(r,function(n){for(var r,o=(e[n]||[]).slice(0),u=0;r=o[u];++u){if(r.busy)return;r.busy=1;try{r.apply(t,r.typed?[n].concat(i):i)}catch(a){t.trigger("error",a)}o[u]!==r&&u--,r.busy=0}e.all&&"all"!=n&&t.trigger.apply(t,["all",n].concat(i))}),t}),t},function(e){function n(t){return t.split(/[/?#]/)}function r(t,e){var n=new RegExp("^"+e[L](/\*/g,"([^/?#]+?)")[L](/\.\./,".*")+"$"),r=t.match(n);return r?r.slice(1):void 0}function o(t,e){var n;return function(){clearTimeout(n),n=setTimeout(t,e)}}function i(t){g=o(l,1),S[_](T,g),S[_](C,g),A[_](H,p),t&&l(!0)}function u(){this.$=[],e.observable(this),j.on("stop",this.s.bind(this)),j.on("emit",this.e.bind(this))}function a(t){return t[L](/^\/|\/$/,"")}function f(t){return"string"==typeof t}function c(t){return(t||O.href)[L](b,"")}function s(t){return"#"==h[0]?(t||O.href).split(h)[1]||"":c(t)[L](h,"")}function l(t){var e=0==F;if(!(F>=E)&&(F++,I.push(function(){var e=s();(t||e!=v)&&(j[M]("emit",e),v=e)}),e)){for(;I.length;)I[0](),I.shift();F=0}}function p(t){if(!(1!=t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var e=t.target;e&&"A"!=e.nodeName;)e=e.parentNode;!e||"A"!=e.nodeName||e[N]("download")||!e[N]("href")||e.target&&"_self"!=e.target||-1==e.href.indexOf(O.href.match(b)[0])||(e.href==O.href||e.href.split("#")[0]!=O.href.split("#")[0]&&("#"==h||0===c(e.href).indexOf(h))&&d(s(e.href),e.title||A.title))&&t.preventDefault()}}function d(t,e){return e=e||A.title,history.pushState(null,e,h+a(t)),A.title=e,k=!1,l(),k}if(t){var g,h,v,m,y,b=/^.+?\/+[^\/]+/,x="EventListener",w="remove"+x,_="add"+x,N="hasAttribute",L="replace",T="popstate",C="hashchange",M="trigger",E=3,S=t,A=document,O=S.history.location||S.location,$=u.prototype,H=A&&A.ontouchstart?"touchstart":"click",R=!1,j=e.observable(),k=!1,I=[],F=0;$.m=function(t,e){!f(t)||e&&!f(e)?e?this.r(t,e):this.r("@",t):d(t,e)},$.s=function(){this.off("*"),this.$=[]},$.e=function(t){this.$.concat("@").some(function(e){var n=("@"==e?m:y)(a(t),a(e));return"undefined"!=typeof n?(this[M].apply(null,[e].concat(n)),k=!0):void 0},this)},$.r=function(t,e){"@"!=t&&(t="/"+a(t),this.$.push(t)),this.on(t,e)};var B=new u,K=B.m.bind(B);K.create=function(){var t=new u;return t.m.stop=t.s.bind(t),t.m.bind(t)},K.base=function(t){h=t||"#",v=s()},K.exec=function(){l(!0)},K.parser=function(t,e){t||e||(m=n,y=r),t&&(m=t),e&&(y=e)},K.query=function(){var t={};return O.href[L](/[?&](.+?)=([^&]*)/g,function(e,n,r){t[n]=r}),t},K.stop=function(){R&&(S[w](T,g),S[w](C,g),A[w](H,p),j[M]("stop"),R=!1)},K.start=function(t){R||("complete"==document.readyState?i(t):S[_]("load",function(){setTimeout(function(){i(t)},1)}),R=!0)},K.base(),K.parser(),e.route=K}}(U);var ot=function(t){function e(t){return t}function n(t,e){return e||(e=h),new RegExp(t.source.replace(/{/g,e[2]).replace(/}/g,e[3]),t.global?f:"")}function r(t){var r,o=t.split(" ");if(t===p)o[2]=o[0],o[3]=o[1],r=e;else{if(2!==o.length||/[\x00-\x1F<>a-zA-Z0-9'",;\\]/.test(t))throw new Error('Unsupported brackets "'+t+'"');o=o.concat(t.replace(/(?=[[\]()*+?.^$|])/g,"\\").split(" ")),r=n}return o[4]=r(o[1].length>1?/{[\S\s]*?}/:/{[^}]*}/,o),o[5]=r(/\\({|})/g,o),o[6]=r(/(\\?)({)/g,o),o[7]=RegExp("(\\\\?)(?:([[({])|("+o[3]+"))|"+l,f),o[8]=t,o}function o(t){t||(t=p),t!==h[8]&&(h=r(t),a=t===p?e:n,h[9]=a(/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/),h[10]=a(/(^|[^\\]){=[\S\s]*?}/),i._rawOffset=h[0].length),g=t}function i(t){return t instanceof RegExp?a(t):h[t]}function u(t){var e;t=t||{},e=t.brackets,Object.defineProperty(t,"brackets",{set:o,get:function(){return g},enumerable:!0}),v=t,o(e)}var a,f="g",c=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,s=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,l=s.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,p="{ }",d={"(":RegExp("([()])|"+l,f),"[":RegExp("([[\\]])|"+l,f),"{":RegExp("([{}])|"+l,f)},g=t,h=[];i.split=function(t,e,n){function r(t){e||u?c.push(t&&t.replace(n[5],"$1")):c.push(t)}function o(e,n){var r,o=d[e],i=1;for(o.lastIndex=n;(r=o.exec(t))&&(!r[1]||(r[1]===e?++i:--i)););return r?o.lastIndex:t.length}n||(n=h);var i,u,a,f,c=[],s=n[6];for(u=a=s.lastIndex=0;i=s.exec(t);){if(f=i.index,u){if(i[2]){s.lastIndex=o(i[2],s.lastIndex);continue}if(!i[3])continue}i[1]||(r(t.slice(a,f)),a=s.lastIndex,s=n[6+(u^=1)],s.lastIndex=a)}return t&&a<t.length&&r(t.slice(a)),c},i.hasExpr=function(t){return i(4).test(t)},i.loopKeys=function(t){var e=t.match(i(9));return e?{key:e[1],pos:e[2],val:h[0]+e[3].trim()+h[1]}:{val:t.trim()}},i.array=function(t){return r(t||g)};var v;return Object.defineProperty(i,"settings",{set:u,get:function(){return v}}),i.settings="undefined"!=typeof U&&U.settings||{},i.set=o,i.R_STRINGS=s,i.R_MLCOMMS=c,i.S_QBLOCKS=l,i}(),it=function(){function e(t,e){return t?(a[t]||(a[t]=r(t))).call(e,n):t}function n(t,n){e.errorHandler&&(t.riotData={tagName:n&&n.root&&n.root.tagName,_riot_id:n&&n._riot_id},e.errorHandler(t))}function r(t){var e=o(t);return"try{return "!==e.slice(0,11)&&(e="return "+e),new Function("E",e+";")}function o(t){var e,n=[],r=ot.split(t.replace(/\u2057/g,'"'),1);if(r.length>2||r[0]){var o,u,a=[];for(o=u=0;o<r.length;++o)e=r[o],e&&(e=1&o?i(e,1,n):'"'+e.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(a[u++]=e);e=2>u?a[0]:"["+a.join(",")+'].join("")'}else e=i(r[1],0,n);return n[0]&&(e=e.replace(c,function(t,e){return n[e].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),e}function i(t,e,n){function r(e,n){var r,o=1,i="("===e?/[()]/g:"["===e?/[[\]]/g:/[{}]/g;for(i.lastIndex=n.lastIndex;r=i.exec(t);)if(r[0]===e)++o;else if(!--o)break;n.lastIndex=o?t.length:i.lastIndex}if("="===t[0]&&(t=t.slice(1)),t=t.replace(f,function(t,e){return t.length>2&&!e?""+(n.push(t)-1)+"~":t}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var o,i=[],a=0;t&&(o=t.match(s))&&!o.index;){var c,l,p=/,|([[{(])|$/g;for(t=RegExp.rightContext,c=o[2]?n[o[2]].slice(1,-1).trim().replace(/\s+/g," "):o[1];l=(o=p.exec(t))[1];)r(l,p);l=t.slice(0,o.index),t=RegExp.rightContext,i[a++]=u(l,1,c)}t=a?a>1?"["+i.join(",")+'].join(" ").trim()':i[0]:u(t,e)}return t}function u(t,e,n){var r;return t=t.replace(p,function(t,e,n,o,i){return n&&(o=r?0:o+t.length,"this"!==n&&"global"!==n&&"window"!==n?(t=e+'("'+n+l+n,o&&(r="."===(i=i[o])||"("===i||"["===i)):o&&(r=!/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/.test(i.slice(o)))),t}),r&&(t="try{return "+t+"}catch(e){E(e,this)}"),n?t=(r?"function(){"+t+"}.call(this)":"("+t+")")+'?"'+n+'":""':e&&(t="function(v){"+(r?t.replace("return ","v="):"v=("+t+")")+';return v||v===0?v:""}.call(this)'),t}var a={};e.isRaw=function(t){return"="===t[ot._rawOffset]},e.haveRaw=function(t){return ot(10).test(t)},e.hasExpr=ot.hasExpr,e.loopKeys=ot.loopKeys,e.errorHandler=null;var f=RegExp(ot.S_QBLOCKS,"g"),c=/\x01(\d+)~/g,s=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\x01(\d+)~):/,l='"in this?this:'+("object"!=typeof t?"global":"window")+").",p=/[,{][$\w]+:|(^ *|[^$\w\.])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g;return e.parse=function(t){return t},e}();it.version=ot.version="v2.3.19";var ut=function(t){function e(e){var i=e&&e.match(/^\s*<([-\w]+)/),u=i&&i[1].toLowerCase(),a=r[u]||o,f=j(a);return f.stub=!0,t&&u&&(i=u.match(et))?n(f,e,u,!!i[1]):f.innerHTML=e,f}function n(t,e,n,r){var i,u=j(o),a=r?"select>":"table>";u.innerHTML="<"+a+e+"</"+a,i=B(n,u),i&&t.appendChild(i)}var r={tr:"tbody",th:"tr",td:"tr",tbody:"table",col:"colgroup"},o="div";return t=t&&10>t,e}(rt),at=function(){if(t){var e=j("style"),n=B("style[type=riot]");return b(e,"type","text/css"),n?(n.parentNode.replaceChild(e,n),n=null):document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet?function(t){e.styleSheet.cssText+=t}:function(t){e.innerHTML+=t}}}(),ft=function(t){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){setTimeout(t,1e3/60)}}(t||{});U.util={brackets:ot,tmpl:it},U.mixin=function(){var t={};return function(e,n){return n?void(t[e]=n):t[e]}}(),U.tag=function(t,e,n,r,o){return h(r)&&(o=r,/^[\w\-]+\s?=/.test(n)?(r=n,n=""):r=""),n&&(h(n)?o=n:at&&at(n)),Q[t]={name:t,tmpl:e,attrs:r,fn:o},t},U.tag2=function(t,e,n,r,o,i){return n&&at&&at(n),Q[t]={name:t,tmpl:e,attrs:r,fn:o},t},U.mount=function(t,e,n){function r(t){var e="";return g(t,function(t){e+=", *["+G+'="'+t.trim()+'"]'}),e}function o(){var t=Object.keys(Q);return t+r(t)}function i(t){var r;if(t.tagName){!e||(r=y(t,G))&&r==e||b(t,G,e);var o=z(t,e||t.getAttribute(G)||t.tagName.toLowerCase(),n);o&&f.push(o)}else t.length&&g(t,i)}var u,a,f=[];if(typeof e===J&&(n=e,e=0),typeof t===X?("*"===t?t=a=o():t+=r(t.split(",")),u=t?F(t):[]):u=t,"*"===e){if(e=a||o(),u.tagName)u=F(e,u);else{var c=[];g(u,function(t){c.push(F(e,t))}),u=c}e=0}return u.tagName?i(u):g(u,i),f},U.update=function(){return g(Z,function(t){t.update()})},U.Tag=s,typeof exports===J?module.exports=U:typeof define===tt&&typeof define.amd!==W?define(function(){return t.riot=U}):t.riot=U}("undefined"!=typeof window?window:void 0);

},{}],13:[function(require,module,exports){
function cacheModule(e){function t(){if(g||c){if(c)u=c,storageKey="cache-module-storage-mock";else{var t="local"===e.storage||"session"===e.storage?e.storage:null;u=t&&void 0!==typeof Storage?window[t+"Storage"]:!1,storageKey=t?"cache-module-"+t+"-storage":null}if(u){var r=u.getItem(storageKey);try{h=JSON.parse(r)||h}catch(n){}}else l(!0,"Browser storage is not supported by this browser. Defaulting to an in-memory cache.")}}function r(){if(g&&u||c){var e=h;try{e=JSON.stringify(e)}catch(t){}u.setItem(storageKey,e)}}function n(e,t){if(e)throw new Error(t)}function a(e){delete h.db[e],delete h.expirations[e],r()}function o(){if(!f){if(f=!0,i.backgroundRefreshIntervalCheck&&i.backgroundRefreshInterval>i.backgroundRefreshMinTtl)throw new Error("BACKGROUND_REFRESH_INTERVAL_EXCEPTION: backgroundRefreshInterval cannot be greater than backgroundRefreshMinTtl.");setInterval(s,i.backgroundRefreshInterval)}}function s(){for(key in h.refreshKeys)if(h.refreshKeys.hasOwnProperty(key)){var e=h.refreshKeys[key];e.expiration-Date.now()<i.backgroundRefreshMinTtl&&e.refresh(key,function(t,r){t||i.set(key,r,e.lifeSpan/1e3,e.refresh,function(){})})}}function l(e,t,r){(i.verbose||e)&&(r?console.log(i.type+": "+t,r):console.log(i.type+t))}var i=this;e=e||{},i.type=e.type||"cache-module",i.verbose=e.verbose||!1,i.defaultExpiration=e.defaultExpiration||900,i.readOnly=e.readOnly||!1,i.checkOnPreviousEmpty="boolean"==typeof e.checkOnPreviousEmpty?e.checkOnPreviousEmpty:!0,i.backgroundRefreshIntervalCheck="boolean"==typeof e.backgroundRefreshIntervalCheck?e.backgroundRefreshIntervalCheck:!0,i.backgroundRefreshInterval=e.backgroundRefreshInterval||6e4,i.backgroundRefreshMinTtl=e.backgroundRefreshMinTtl||7e4;var u=null,c=e.storageMock||!1,f=!1,g="undefined"!=typeof window,h={db:{},expirations:{},refreshKeys:{}};t(),l(!1,"Cache-module client created with the following defaults:",{type:i.type,defaultExpiration:i.defaultExpiration,verbose:i.verbose,readOnly:i.readOnly}),i.get=function(e,t){n(arguments.length<2,"ARGUMENT_EXCEPTION: .get() requires 2 arguments."),l(!1,"get() called:",{key:e});try{var r=Date.now(),o=h.expirations[e];o>r?t(null,h.db[e]):(a(e),t(null,null))}catch(s){t({name:"GetException",message:s},null)}},i.mget=function(e,t,r){n(arguments.length<2,"ARGUMENT_EXCEPTION: .mget() requires 2 arguments."),l(!1,".mget() called:",{keys:e});for(var a={},o=0;o<e.length;o++){var s=e[o];i.get(s,function(e,t){null!==t&&(a[s]=t)})}t(null,a,r)},i.set=function(){n(arguments.length<2,"ARGUMENT_EXCEPTION: .set() requires at least 2 arguments.");var e=arguments[0],t=arguments[1],a=arguments[2]||null,s=5==arguments.length?arguments[3]:null,u=5==arguments.length?arguments[4]:arguments[3];if(l(!1,".set() called:",{key:e,value:t}),!i.readOnly)try{a=a?1e3*a:1e3*i.defaultExpiration;var c=a+Date.now();h.expirations[e]=c,h.db[e]=t,u&&u(),s&&(h.refreshKeys[e]={expiration:c,lifeSpan:a,refresh:s},o()),r()}catch(f){l(!0,".set() failed for cache of type "+i.type,{name:"CacheModuleSetException",message:f})}},i.mset=function(e,t,r){n(arguments.length<1,"ARGUMENT_EXCEPTION: .mset() requires at least 1 argument."),l(!1,".mset() called:",{data:e});for(key in e)if(e.hasOwnProperty(key)){var a=t||i.defaultExpiration,o=e[key];"object"==typeof o&&o.cacheValue&&(a=o.expiration||a,o=o.cacheValue),i.set(key,o,a)}r&&r()},i.del=function(e,t){if(n(arguments.length<1,"ARGUMENT_EXCEPTION: .del() requires at least 1 argument."),l(!1,".del() called:",{keys:e}),"object"==typeof e){for(var a=0;a<e.length;a++){var o=e[a];delete h.db[o],delete h.expirations[o],delete h.refreshKeys[o]}t&&t(null,e.length)}else delete h.db[e],delete h.expirations[e],delete h.refreshKeys[e],t&&t(null,1);r()},i.flush=function(e){l(!1,".flush() called"),h.db={},h.expirations={},h.refreshKeys={},e&&e(),r()}}module.exports=cacheModule;

},{}],14:[function(require,module,exports){
module.exports=function(e,r,n){function t(e,r){var n=null,t=null,p=o(e),a=u(e);return(r.pruneParams||r.pruneOptions)&&(n=r.pruneParams?s(h(p),r.pruneParams):p,t=r.pruneOptions?s(h(a),r.pruneOptions,!0):a),JSON.stringify({nameSpace:y.cache.nameSpace,method:e.method,uri:e.url,params:n||p||null,options:t||a||null})}function o(e){return e&&e.qs&&!c(e.qs)?e.qs:e&&e.qsRaw?p(e.qsRaw):e&&e.req?a(e.req.path):e&&e._query?a(e._query.join("&")):null}function u(e){return e&&e.req&&e.req._headers?e.req._headers:e&&e._header?e._header:null}function p(e){if(e&&e.length){for(var r={},n=0;n<e.length;n++)for(var t=e[n],o=t.split("&"),u=0;u<o.length;u++){var p=o[u].split("=");r[p[0]]=p[1]}return r}return null}function a(e){if(e){var r={};if(~e.indexOf("?")){var n=e.split("?");e=n[1]}for(var t=e.split("&"),o=0;o<t.length;o++){var u=t[o].split("=");r[u[0]]=u[1]}return r}return null}function s(e,r,n){for(var t=0;t<r.length;t++){var o=r[t];n&&(o=o.toLowerCase()),delete e[o]}return e}function i(e){var r={};return r.body=e.body,r.text=e.text,r.headers=e.headers,r.statusCode=e.statusCode,r.status=e.status,r.ok=e.ok,r}function c(e){return e===!1||null===e||"object"==typeof e&&0==Object.keys(e).length}function h(e){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}function f(e){return{doQuery:"boolean"==typeof e.doQuery?e.doQuery:!0,cacheWhenEmpty:"boolean"==typeof e.cacheWhenEmpty?e.cacheWhenEmpty:!0,prune:e.prune,pruneParams:e.pruneParams,pruneOptions:e.pruneOptions,responseProp:e.responseProp,expiration:e.expiration,backgroundRefresh:e.backgroundRefresh}}function l(e){return function(r,n){r=JSON.parse(r);var t=r.method.toLowerCase(),o=y[t](r.uri).doQuery(e.doQuery).pruneParams(e.pruneParams).pruneOptions(e.pruneOptions).prune(e.prune).responseProp(e.responseProp).expiration(e.expiration).cacheWhenEmpty(e.cacheWhenEmpty);r.params&&o.query(r.params),r.options&&o.set(r.options),o.end(n)}}function d(e,r,n,t){if(1===e.length)e(n);else{if(!(e.length>1))throw new Error("UnsupportedCallbackException: Your .end() callback must pass at least one argument.");e(r,n,t)}}var y=e?e:require("superagent");if(!y.patchedBySuperagentCache){y.cache=r&&r.get?r:new(require("cache-service-cache-module"))(r),y.defaults=n||{};var m=y.Request,v=f(y.defaults),g=["GET","HEAD","POST","PUT","DELETE"],P=["GET","HEAD"];y.patchedBySuperagentCache=!0,m.prototype.doQuery=function(e){return v.doQuery=e,this},m.prototype.pruneParams=function(e){return v.pruneParams=e,this},m.prototype.pruneOptions=function(e){return v.pruneOptions=e,this},m.prototype.prune=function(e){return v.prune=e,this},m.prototype.responseProp=function(e){return v.responseProp=e,this},m.prototype.expiration=function(e){return v.expiration=e,this},m.prototype.cacheWhenEmpty=function(e){return v.cacheWhenEmpty=e,this},m.prototype.backgroundRefresh=function(e){return v.backgroundRefresh="undefined"!=typeof e?e:!0,this},m.prototype.execute=m.prototype.end,m.prototype._end=function(e){v=f(y.defaults),this.execute(e)},m.prototype.end=function(e){var r=v;if(v=f(y.defaults),~g.indexOf(this.method)){var n=this,o=t(this,r);~P.indexOf(this.method)?y.cache.get(o,function(t,u){!t&&u?d(e,t,u,o):r.doQuery?n._end(function(n,t){if(n)return d(e,n,t,o);if(!n&&t)if(t=r.prune?r.prune(t):r.responseProp?t[r.responseProp]||null:i(t),!c(t)||r.cacheWhenEmpty){var u=r.backgroundRefresh||null;"boolean"==typeof u&&(u=l(r)),y.cache.set(o,t,r.expiration,u,function(){d(e,n,t,o)})}else d(e,n,t,o)}):d(e,null,null,o)}):this._end(function(r,t){if(r)return d(e,r,t,o);if(!r&&t){var u=o.replace('"method":"'+n.method+'"','"method":"GET"'),p=o.replace('"method":"'+n.method+'"','"method":"HEAD"');y.cache.del([u,p],function(){d(e,r,t,o)})}})}else this._end(function(r,n){d(e,r,n,void 0)})},m.prototype.reset=function(){this.req=null}}return e?void 0:y};

},{"cache-service-cache-module":13,"superagent":16}],15:[function(require,module,exports){
function wrap(n,t){var e=n.Request.prototype.end,o=n.Request.prototype._end;n.Request.prototype.end=function(n){var o=this;return new t(function(t,r){e.call(o,function(e,o){n&&n(e,o),e?(e.response=o,r(e)):t(o)})})},n.prototype.then=function(n,o){var r=this;return new t(function(n,t){e.call(r,function(e,o){e?(e.response=o,t(e)):n(o)})}).then(n,o)},n.prototype._then=function(n,e){var r=this;return new t(function(n,t){o.call(r,function(e,o){e?(e.response=o,t(e)):n(o)})}).then(n,e)},n.Request.prototype._end=function(n){var e=this;return new t(function(t,r){o.call(e,function(e,o){n&&n(e,o),e?(e.response=o,r(e)):t(o)})})}}module.exports=wrap;

},{}],16:[function(require,module,exports){
function noop(){}function isHost(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function isObject(t){return t===Object(t)}function serialize(t){if(!isObject(t))return t;var e=[];for(var r in t)null!=t[r]&&pushEncodedKeyValuePair(e,r,t[r]);return e.join("&")}function pushEncodedKeyValuePair(t,e,r){return Array.isArray(r)?r.forEach(function(r){pushEncodedKeyValuePair(t,e,r)}):void t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}function parseString(t){for(var e,r,s={},i=t.split("&"),n=0,o=i.length;o>n;++n)r=i[n],e=r.split("="),s[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return s}function parseHeader(t){var e,r,s,i,n=t.split(/\r?\n/),o={};n.pop();for(var u=0,a=n.length;a>u;++u)r=n[u],e=r.indexOf(":"),s=r.slice(0,e).toLowerCase(),i=trim(r.slice(e+1)),o[s]=i;return o}function isJSON(t){return/[\/+]json\b/.test(t)}function type(t){return t.split(/ *; */).shift()}function params(t){return reduce(t.split(/ *; */),function(t,e){var r=e.split(/ *= */),s=r.shift(),i=r.shift();return s&&i&&(t[s]=i),t},{})}function Response(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function Request(t,e){var r=this;Emitter.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new Response(r)}catch(s){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=s,t.rawResponse=r.xhr&&r.xhr.responseText?r.xhr.responseText:null,r.callback(t)}if(r.emit("response",e),t)return r.callback(t,e);if(e.status>=200&&e.status<300)return r.callback(t,e);var i=new Error(e.statusText||"Unsuccessful HTTP response");i.original=t,i.response=e,i.status=e.status,r.callback(i,e)})}function request(t,e){return"function"==typeof e?new Request("GET",t).end(e):1==arguments.length?new Request("GET",t):new Request(t,e)}function del(t,e){var r=request("DELETE",t);return e&&r.end(e),r}var Emitter=require("emitter"),reduce=require("reduce"),root;root="undefined"!=typeof window?window:"undefined"!=typeof self?self:this,request.getXHR=function(){if(!(!root.XMLHttpRequest||root.location&&"file:"==root.location.protocol&&root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var trim="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},Response.prototype.get=function(t){return this.header[t.toLowerCase()]},Response.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=type(e);var r=params(e);for(var s in r)this[s]=r[s]},Response.prototype.parseBody=function(t){var e=request.parse[this.type];return e&&t&&(t.length||t instanceof Object)?e(t):null},Response.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},Response.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,s="cannot "+e+" "+r+" ("+this.status+")",i=new Error(s);return i.status=this.status,i.method=e,i.url=r,i},request.Response=Response,Emitter(Request.prototype),Request.prototype.use=function(t){return t(this),this},Request.prototype.timeout=function(t){return this._timeout=t,this},Request.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},Request.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},Request.prototype.set=function(t,e){if(isObject(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},Request.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},Request.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},Request.prototype.type=function(t){return this.set("Content-Type",request.types[t]||t),this},Request.prototype.parse=function(t){return this._parser=t,this},Request.prototype.accept=function(t){return this.set("Accept",request.types[t]||t),this},Request.prototype.auth=function(t,e){var r=btoa(t+":"+e);return this.set("Authorization","Basic "+r),this},Request.prototype.query=function(t){return"string"!=typeof t&&(t=serialize(t)),t&&this._query.push(t),this},Request.prototype.field=function(t,e){return this._formData||(this._formData=new root.FormData),this._formData.append(t,e),this},Request.prototype.attach=function(t,e,r){return this._formData||(this._formData=new root.FormData),this._formData.append(t,e,r),this},Request.prototype.send=function(t){var e=isObject(t),r=this.getHeader("Content-Type");if(e&&isObject(this._data))for(var s in t)this._data[s]=t[s];else"string"==typeof t?(r||this.type("form"),r=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==r?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return!e||isHost(t)?this:(r||this.type("json"),this)},Request.prototype.callback=function(t,e){var r=this._callback;this.clearTimeout(),r(t,e)},Request.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},Request.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},Request.prototype.withCredentials=function(){return this._withCredentials=!0,this},Request.prototype.end=function(t){var e=this,r=this.xhr=request.getXHR(),s=this._query.join("&"),i=this._timeout,n=this._formData||this._data;this._callback=t||noop,r.onreadystatechange=function(){if(4==r.readyState){var t;try{t=r.status}catch(s){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var o=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.emit("progress",t)};this.hasListeners("progress")&&(r.onprogress=o);try{r.upload&&this.hasListeners("progress")&&(r.upload.onprogress=o)}catch(u){}if(i&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},i)),s&&(s=request.serializeObject(s),this.url+=~this.url.indexOf("?")?"&"+s:"?"+s),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!isHost(n)){var a=this.getHeader("Content-Type"),h=this._parser||request.serialize[a?a.split(";")[0]:""];!h&&isJSON(a)&&(h=request.serialize["application/json"]),h&&(n=h(n))}for(var p in this.header)null!=this.header[p]&&r.setRequestHeader(p,this.header[p]);return this.emit("request",this),r.send("undefined"!=typeof n?n:null),this},Request.prototype.then=function(t,e){return this.end(function(r,s){r?e(r):t(s)})},request.Request=Request,request.get=function(t,e,r){var s=request("GET",t);return"function"==typeof e&&(r=e,e=null),e&&s.query(e),r&&s.end(r),s},request.head=function(t,e,r){var s=request("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.del=del,request["delete"]=del,request.patch=function(t,e,r){var s=request("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.post=function(t,e,r){var s=request("POST",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.put=function(t,e,r){var s=request("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},module.exports=request;

},{"emitter":17,"reduce":18}],17:[function(require,module,exports){
function Emitter(t){return t?mixin(t):void 0}function mixin(t){for(var e in Emitter.prototype)t[e]=Emitter.prototype[e];return t}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},Emitter.prototype.once=function(t,e){function i(){r.off(t,i),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,s=0;s<i.length;s++)if(r=i[s],r===e||r.fn===e){i.splice(s,1);break}return this},Emitter.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var r=0,s=i.length;s>r;++r)i[r].apply(this,e)}return this},Emitter.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},Emitter.prototype.hasListeners=function(t){return!!this.listeners(t).length};

},{}],18:[function(require,module,exports){
module.exports=function(l,n,e){for(var r=0,t=l.length,u=3==arguments.length?e:l[r++];t>r;)u=n.call(null,u,l[r],++r,l);return u};

},{}],19:[function(require,module,exports){
(function (global){
!function(t){"use strict";function e(t){if(t){var e=this;t(function(t){e.resolve(t)},function(t){e.reject(t)})}}function n(t,e){if("function"==typeof t.y)try{var n=t.y.call(i,e);t.p.resolve(n)}catch(o){t.p.reject(o)}else t.p.resolve(e)}function o(t,e){if("function"==typeof t.n)try{var n=t.n.call(i,e);t.p.resolve(n)}catch(o){t.p.reject(o)}else t.p.reject(e)}var r,i,c="fulfilled",u="rejected",s="undefined",f=function(){function t(){for(;e.length-n;)e[n](),n++,n==o&&(e.splice(0,o),n=0)}var e=[],n=0,o=1024,r=function(){if(typeof MutationObserver!==s){var e=document.createElement("div"),n=new MutationObserver(t);return n.observe(e,{attributes:!0}),function(){e.setAttribute("a",0)}}return typeof setImmediate!==s?function(){setImmediate(t)}:function(){setTimeout(t,0)}}();return function(t){e.push(t),e.length-n==1&&r()}}();e.prototype={resolve:function(t){if(this.state===r){if(t===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var e=this;if(t&&("function"==typeof t||"object"==typeof t))try{var o=!0,i=t.then;if("function"==typeof i)return void i.call(t,function(t){o&&(o=!1,e.resolve(t))},function(t){o&&(o=!1,e.reject(t))})}catch(u){return void(o&&this.reject(u))}this.state=c,this.v=t,e.c&&f(function(){for(var o=0,r=e.c.length;r>o;o++)n(e.c[o],t)})}},reject:function(t){if(this.state===r){this.state=u,this.v=t;var n=this.c;n?f(function(){for(var e=0,r=n.length;r>e;e++)o(n[e],t)}):e.suppressUncaughtRejectionError||console.log("You upset Zousan. Please catch rejections: ",t,t.stack)}},then:function(t,i){var u=new e,s={y:t,n:i,p:u};if(this.state===r)this.c?this.c.push(s):this.c=[s];else{var l=this.state,a=this.v;f(function(){l===c?n(s,a):o(s,a)})}return u},"catch":function(t){return this.then(null,t)},"finally":function(t){return this.then(t,t)},timeout:function(t,n){n=n||"Timeout";var o=this;return new e(function(e,r){setTimeout(function(){r(Error(n))},t),o.then(function(t){e(t)},function(t){r(t)})})}},e.resolve=function(t){var n=new e;return n.resolve(t),n},e.reject=function(t){var n=new e;return n.reject(t),n},e.all=function(t){function n(n,c){"function"!=typeof n.then&&(n=e.resolve(n)),n.then(function(e){o[c]=e,r++,r==t.length&&i.resolve(o)},function(t){i.reject(t)})}for(var o=[],r=0,i=new e,c=0;c<t.length;c++)n(t[c],c);return t.length||i.resolve(o),i},typeof module!=s&&module.exports&&(module.exports=e),t.Zousan=e,e.soon=f}("undefined"!=typeof global?global:this);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[2]);
