(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var e=setTimeout(cleanUpNextTick);draining=!0;for(var n=queue.length;n;){for(currentQueue=queue,queue=[];++queueIndex<n;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,n=queue.length}currentQueue=null,draining=!1,clearTimeout(e)}}function Item(e,n){this.fun=e,this.array=n}function noop(){}var process=module.exports={},queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];queue.push(new Item(e,n)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],2:[function(require,module,exports){
function restrict(e,r){~document.cookie.indexOf("logged_in")?r():(e.alert={type:"error",message:"Please login or create an account to proceed."},page.redirect("/"))}function loading(e,r){clearTimeout(timer),timer=setTimeout(function(){wrapperTag.classList.add("loading")},250),r()}function doneLoading(e,r){clearTimeout(timer),wrapperTag.classList.remove("loading"),r()}function errorHandler(e,r){if(e.err)switch(e.err.status){case 400:e.alert={type:"error",message:"Invalid username/password combination."},r();break;case 404:e.alert={type:"error",message:"The entry cannot be found."},r();break;case 500:e.alert={type:"error",message:"Something went wrong. Please try again."},r();break;default:r()}else r()}function renderView(e,r){mainTag.innerHTML="<"+e+"></"+e+">",riot.mount(e,r)}function loginHandler(e){renderView("login-page",{page:page,userService:userService,alert:e.alert})}function entriesHandler(e){renderView("entry-list",{page:page,entryService:entryService,entries:e.response?e.response.entries:[],entryCount:e.response?e.response.entryCount:0,offset:e.response?e.response.offset:20,query:qs.parse(location.search.slice(1))})}function entryHandler(e){renderView("entry-view",{page:page,entryService:entryService,entry:e.state.data||e.response.entry})}function newEntryHandler(e){renderView("new-entry",{page:page,entryService:entryService})}function editEntryHandler(e){renderView("edit-entry",{page:page,entryService:entryService,entry:e.state.data||e.response.entry})}var page=require("page"),qs=require("./qs"),userService=require("./user-service"),user=new(require("../../middleware/service-wrapper"))(userService),entryService=require("./entry-service"),entry=new(require("../../middleware/service-wrapper"))(entryService),fastclick=require("fastclick"),riot=require("riot"),loginPageTag=require("../tags/login-page.tag"),entryListTag=require("../tags/entry-list.tag"),paginationTag=require("../tags/pagination.tag"),entryViewTag=require("../tags/entry-view.tag"),newEntryTag=require("../tags/new-entry.tag"),editEntryTag=require("../tags/edit-entry.tag"),mainTag=document.querySelector("main"),wrapperTag=document.getElementById("main-wrapper"),timer;fastclick(document.body);var clearIntervals=function(e,r){r()};window.journalIntervals=[],clearIntervals=function(e,r){for(var n=0;n<window.journalIntervals.length;++n)clearInterval(window.journalIntervals[n]);window.journalIntervals=[],r()},page.base("/"),page("*",clearIntervals),page("/",loginHandler),page("entries",loading,restrict,entry.getAllEntries,errorHandler,doneLoading,entriesHandler),page("entry/new",restrict,newEntryHandler),page("entry/:id",loading,entry.getEntryById,errorHandler,doneLoading,entryHandler),page("entry/:id/edit",restrict,entry.getEntryById,errorHandler,editEntryHandler),page({dispatch:!0});
},{"../../middleware/service-wrapper":12,"../tags/edit-entry.tag":6,"../tags/entry-list.tag":7,"../tags/entry-view.tag":8,"../tags/login-page.tag":9,"../tags/new-entry.tag":10,"../tags/pagination.tag":11,"./entry-service":3,"./qs":4,"./user-service":5,"fastclick":13,"page":14,"riot":17}],3:[function(require,module,exports){
var xhr=require("superagent");exports.getAllEntries=function(t){return xhr.get("/entries").accept("application/json").query(t.querystring)},exports.getEntryById=function(t){return xhr.get("/entry/"+t).accept("application/json")},exports.createEntry=function(t){return xhr.post("/entry").accept("application/json").send(t)},exports.updateEntry=function(t){return xhr.put("/entry/"+t.id).accept("application/json").send(t)},exports.deleteEntry=function(t){return xhr.post("/entry/"+t).accept("application/json").query({_method:"DELETE"})};

},{"superagent":18}],4:[function(require,module,exports){
!function(r){function e(r,e){if(0==r[e].length)return r[e]={};var t={};for(var n in r[e])t[n]=r[e][n];return r[e]=t,t}function t(r,n,o,i){var s=r.shift();if(s){var a=n[o]=n[o]||[];"]"==s?Array.isArray(a)?""!=i&&a.push(i):"object"==typeof a?a[Object.keys(a).length]=i:a=n[o]=[n[o],i]:~s.indexOf("]")?(s=s.substr(0,s.length-1),!p.test(s)&&Array.isArray(a)&&(a=e(n,o)),t(r,a,s,i)):(!p.test(s)&&Array.isArray(a)&&(a=e(n,o)),t(r,a,s,i))}else Array.isArray(n[o])?n[o].push(i):"object"==typeof n[o]?n[o]=i:"undefined"==typeof n[o]?n[o]=i:n[o]=[n[o],i]}function n(r,e,n){if(~e.indexOf("]")){var o=e.split("[");o.length;t(o,r,"base",n)}else{if(!p.test(e)&&Array.isArray(r.base)){var i={};for(var s in r.base)i[s]=r.base[s];r.base=i}u(r.base,e,n)}return r}function o(r){var e={base:{}};return Object.keys(r).forEach(function(t){n(e,t,r[t])}),e.base}function i(r){return String(r).split("&").reduce(function(r,e){try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(t){}var o=e.indexOf("="),i=c(e),s=e.substr(0,i||o),a=e.substr(i||o,e.length),a=a.substr(a.indexOf("=")+1,a.length);return""==s&&(s=e,a=""),n(r,s,a)},{base:{}}).base}function s(r,e){if(!e)throw new TypeError("stringify expects an object");return e+"="+encodeURIComponent(r)}function a(r,e){var t=[];if(!e)throw new TypeError("stringify expects an object");for(var n=0;n<r.length;n++)t.push(b(r[n],e+"["+n+"]"));return t.join("&")}function f(r,e){for(var t,n=[],o=Object.keys(r),i=0,s=o.length;s>i;++i)t=o[i],n.push(b(r[t],e?e+"["+encodeURIComponent(t)+"]":encodeURIComponent(t)));return n.join("&")}function u(r,e,t){var n=r[e];void 0===n?r[e]=t:Array.isArray(n)?n.push(t):r[e]=[n,t]}function c(r){for(var e,t,n=r.length,o=0;n>o;++o)if(t=r[o],"]"==t&&(e=!1),"["==t&&(e=!0),"="==t&&!e)return o}r.version="0.4.2";var y=Object.prototype.toString,p=/^[0-9]+$/;r.parse=function(r){return null==r||""==r?{}:"object"==typeof r?o(r):i(r)};var b=r.stringify=function(r,e){return Array.isArray(r)?a(r,e):"[object Object]"==y.call(r)?f(r,e):"string"==typeof r?s(r,e):e+"="+r}}("undefined"==typeof exports?qs={}:exports);

},{}],5:[function(require,module,exports){
var xhr=require("superagent");exports.attemptJoin=function(t){return xhr.post("/user").accept("application/json").send(t)},exports.attemptLogin=function(t){return xhr.post("/user/authenticate").accept("application/json").send(t)},exports.updateAccount=function(t){},exports.deleteAccount=function(t){};

},{"superagent":18}],6:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag2("edit-entry",'<form method="post" action="/entry/{opts.entry.id}?_method=PUT" onsubmit="{edit}" class="pure-form pure-form-stacked"> <fieldset> <legend>Edit Your Entry</legend> <input type="hidden" name="id" value="{opts.entry.id}" class="needsclick"> <input name="date" value="{opts.entry.date}"> <textarea name="text" class="entry-text needsclick">{opts.entry.text}</textarea> Is Public: <input type="checkbox" name="isPublic" __checked="{opts.entry.isPublic}"> <a href="/entry/{opts.entry.id}" class="pure-button">Cancel</a> <input type="submit" class="pure-button pure-button-primary"> </fieldset> </form>',"","",function(e){var t=this;this.edit=function(i){var n={id:t.id.value,date:t.date.value,text:t.text.value,isPublic:t.isPublic.checked,isOwner:!0};e.entryService.updateEntry(n).then(function(i){e.page.replace("/entry/"+t.id.value,{data:n})},function(e){alert(e)})}},"{ }");

},{"riot":17}],7:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag2("entry-list",'<form method="get" action="/entries" onsubmit="{search}" class="pure-form block"> <input name="q" placeholder="Search" value="{opts.query.q}" class="pure-u-1 pure-u-sm-1-2 pure-u-sm-1-3 block center needsclick"> </form> <div each="{opts.entries}" class="entry-preview"> <a class="entry-link" href="/entry/{id}">{date}</a> <span if="{!isPublic}">Private</span> <span if="{isPublic}">Public</span> <p class="entry-text">{text}</p> </div> <pagination data="{paginationData}"></pagination>',"","",function(e){var t=this;t.paginationData={url:"/entries",total:e.entryCount,offset:e.offset,current:e.query.p||1,queryString:e.query.q?"?q="+e.query.q+"&":"?"},t.update(),t.search=function(a){a.preventDefault(),e.page("/entries?q="+t.q.value)}},"{ }");

},{"riot":17}],8:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag2("entry-view",'<h1> {opts.entry.date} <span if="{!opts.entry.isPublic}">Private</span> <span if="{opts.entry.isPublic}">Public</span> </h1> <p><pre class="entry-text">{opts.entry.text}</pre></p> <div if="{opts.entry.isOwner}"> <form method="post" action="/entry/{opts.entry.id}?_method=DELETE" onsubmit="{del}" class="form-submit-only"> <input type="submit" value="Delete" class="pure-button button-warning"> </form> <a href="/entry/{opts.entry.id}/edit" onclick="{edit}" class="pure-button button-margin-left">Edit</a> </div>',"","",function(t){var e=this;e.edit=function(e){t.page("/entry/"+t.entry.id+"/edit",{data:t.entry})},e.del=function(e){t.entryService.deleteEntry(t.entry.id).then(function(e){t.page.replace("/entries")},function(t){alert(t)})}},"{ }");

},{"riot":17}],9:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag2("login-page",'<div class="login-page-wrapper"> <form method="post" action="/user" onsubmit="{join}" class="pure-form pure-form-stacked full-width"> <fieldset> <legend>Create an Account</legend> <input id="join-username" name="username" placeholder="username" autocapitalize="off" class="needsclick"> <input id="join-password" name="password" type="password" placeholder="password" class="needsclick"> <input type="submit" class="pure-button pure-button-primary"> </fieldset> </form> <form method="post" action="/user/authenticate" onsubmit="{login}" class="pure-form pure-form-stacked full-width"> <fieldset> <legend>or Login</legend> <input id="login-username" name="username" placeholder="username" autocapitalize="off" class="needsclick"> <input id="login-password" name="password" type="password" placeholder="password" class="needsclick"> <input type="submit" class="pure-button pure-button-primary"> </fieldset> </form> </div>',"","",function(e){var n=this;n.join=function(n){var t={username:document.getElementById("join-username").value,password:document.getElementById("join-password").value};e.userService.attemptJoin(t).then(function(n){e.page.replace("/entries")},function(e){alert(e)})},n.login=function(n){var t={username:document.getElementById("login-username").value,password:document.getElementById("login-password").value};e.userService.attemptLogin(t).then(function(n){e.page.replace("/entries")},function(e){alert(e)})}},"{ }");

},{"riot":17}],10:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag2("new-entry",'<form method="post" action="/entry" onsubmit="{upsert}" class="pure-form pure-form-stacked"> <fieldset> <legend>Create a new Entry</legend> <input name="date" value="{opts.entry.date}" class="needsclick"> <textarea name="text" class="entry-text needsclick"></textarea> Is Public: <input type="checkbox" name="isPublic" __checked="{opts.entry.isPublic}"> <a href="/entries" class="pure-button button-round">Cancel</a> <input type="submit" class="pure-button pure-button-primary button-round"> </fieldset> </form>',"","",function(e){function t(){var e=new Date,t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()));return t.toISOString().slice(0,10)}var n=this;if(e.entry={date:t()},n.update(),"undefined"!=typeof window){var r=setInterval(function(){(n.date.value!=e.entry.date||n.text.value!=e.entry.text)&&n.text.value&&n.text.value.length&&n.upsert({isBackgroundUpsert:!0})},5e3);window.journalIntervals=[r]}n.upsert=function(t){e.entry.id?n.updateEntry(t.isBackgroundUpsert):n.createEntry(t.isBackgroundUpsert)},n.createEntry=function(t){var r={date:n.date.value,text:n.text.value,isPublic:n.isPublic.checked,isOwner:!0};e.entryService.createEntry(r).then(function(a){t?(e.entry.id=a.body.id,e.entry.date=n.date.value,e.entry.text=n.text.value,e.entry.isPublic=n.isPublic.checked,n.update()):(r.id=a.body.id,e.page.replace("/entry/"+a.body.id,{data:r}))},function(e){alert(e)})},n.updateEntry=function(t){var r={id:e.entry.id,date:n.date.value,text:n.text.value,isPublic:n.isPublic.checked,isOwner:!0};e.entryService.updateEntry(r).then(function(a){t?(e.entry.date=n.date.value,e.entry.text=n.text.value,e.entry.isPublic=n.isPublic.checked,n.update()):e.page.replace("/entry/"+e.entry.id,{data:r})},function(e){alert(e)})}},"{ }");

},{"riot":17}],11:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag2("pagination",'<ul class="pagination"> <li><a href="{firstPage}" class="{active: current == 1}">«</a></li> <li><a href="{prevPage}" class="{active: current == 1}">‹</a></li> <li each="{pages}"><a href="{href}" class="{active: current == page}">{page}</a></li> <li><a href="{nextPage}" class="{active: current == totalPages}">›</a></li> <li><a href="{lastPage}" class="{active: current == totalPages}">»</a></li> </ul>',"",'if="{totalPages > 1}"',function(a){function t(){for(var t=Math.ceil(a.data.total/a.data.offset),e=[],i=1;t>=i;++i)1==i?e.push({page:i,href:a.data.url+a.data.queryString}):a.data.current<3&&6>i?e.push({page:i,href:a.data.url+a.data.queryString+"p="+i}):a.data.current>t-3&&i>t-5&&e.push({page:i,href:a.data.url+a.data.queryString+"p="+i});r.current=a.data.current,r.pages=e,r.firstPage=a.data.url,r.firstPage+=a.data.queryString.length>1?a.data.queryString:"",r.prevPage=a.data.url+a.data.queryString,r.prevPage+=a.data.current>2?"p="+(parseInt(a.data.current,10)-1):"",r.nextPage=a.data.url+a.data.queryString+"p="+(parseInt(a.data.current,10)+1),r.lastPage=a.data.url+a.data.queryString+"p="+t,r.totalPages=t}var r=this;t(),r.update()},"{ }");

},{"riot":17}],12:[function(require,module,exports){
function serviceWrapper(r){var a=this,e=Object.keys(r);e.forEach(function(e){a[e]=function(a,s,t){if(!t&&a.state&&a.state.data)return void s();var n=null;n=t?Object.keys(a.body).length?a.body:a.params.id:a.state.data||a.params.id||{},t?(a.query&&(n.query=a.query),a.params&&(n.params=a.params)):(a.querystring&&(n.querystring=a.querystring),a.params&&(n.params=a.params)),r[e](n,a.user).then(function(r){a.response=r?r.body||r:!1,t?t():s()},function(r){a.err=r,t?t():s()})}})}module.exports=serviceWrapper;

},{}],13:[function(require,module,exports){
!function(){"use strict";function t(e,o){function i(t,e){return function(){return t.apply(e,arguments)}}var r;if(o=o||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=o.touchBoundary||10,this.layer=e,this.tapDelay=o.tapDelay||200,this.tapTimeout=o.tapTimeout||700,!t.notNeeded(e)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],c=this,s=0,u=a.length;u>s;s++)c[a[s]]=i(c[a[s]],c);n&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,o){var i=Node.prototype.removeEventListener;"click"===t?i.call(e,t,n.hijacked||n,o):i.call(e,t,n,o)},e.addEventListener=function(t,n,o){var i=Node.prototype.addEventListener;"click"===t?i.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),o):i.call(e,t,n,o)}),"function"==typeof e.onclick&&(r=e.onclick,e.addEventListener("click",function(t){r(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!e,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,i=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=o&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(o&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,o;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),o=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;o&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,r;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],o){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,a,c,s,u,l=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(u=t.changedTouches[0],l=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),c=l.tagName.toLowerCase(),"label"===c){if(e=this.findControl(l)){if(this.focus(l),n)return!1;l=e}}else if(this.needsFocus(l))return t.timeStamp-a>100||o&&window.top!==window&&"input"===c?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,t),o&&"select"===c||(this.targetElement=null,t.preventDefault()),!1);return o&&!i&&(s=l.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(l)||(t.preventDefault(),this.sendClick(l,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,o,i,r;if("undefined"==typeof window.ontouchstart)return!0;if(o=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(o>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(r=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction?!0:!1)},t.attach=function(e,n){return new t(e,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}();

},{}],14:[function(require,module,exports){
(function (process){
"use strict";function page(e,t){if("function"==typeof e)return page("*",e);if("function"==typeof t)for(var n=new Route(e),a=1;a<arguments.length;++a)page.callbacks.push(n.middleware(arguments[a]));else"string"==typeof e?page["string"==typeof t?"redirect":"show"](e,t):page.start(e)}function unhandled(e){if(!e.handled){var t;t=hashbang?base+location.hash.replace("#!",""):location.pathname+location.search,t!==e.canonicalPath&&(page.stop(),e.handled=!1,location.href=e.canonicalPath)}}function decodeURLEncodedURIComponent(e){return"string"!=typeof e?e:decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e}function Context(e,t){"/"===e[0]&&0!==e.indexOf(base)&&(e=base+(hashbang?"#!":"")+e);var n=e.indexOf("?");if(this.canonicalPath=e,this.path=e.replace(base,"")||"/",hashbang&&(this.path=this.path.replace("#!","")||"/"),this.title=document.title,this.state=t||{},this.state.path=e,this.querystring=~n?decodeURLEncodedURIComponent(e.slice(n+1)):"",this.pathname=decodeURLEncodedURIComponent(~n?e.slice(0,n):e),this.params={},this.hash="",!hashbang){if(!~this.path.indexOf("#"))return;var a=this.path.split("#");this.path=a[0],this.hash=decodeURLEncodedURIComponent(a[1])||"",this.querystring=this.querystring.split("#")[0]}}function Route(e,t){t=t||{},this.path="*"===e?"(.*)":e,this.method="GET",this.regexp=pathtoRegexp(this.path,this.keys=[],t.sensitive,t.strict)}function onclick(e){if(1===which(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var t=e.target;t&&"A"!==t.nodeName;)t=t.parentNode;if(t&&"A"===t.nodeName&&!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var n=t.getAttribute("href");if((hashbang||t.pathname!==location.pathname||!t.hash&&"#"!==n)&&!(n&&n.indexOf("mailto:")>-1)&&!t.target&&sameOrigin(t.href)){var a=t.pathname+t.search+(t.hash||"");"undefined"!=typeof process&&a.match(/^\/[a-zA-Z]:\//)&&(a=a.replace(/^\/[a-zA-Z]:\//,"/"));var o=a;0===a.indexOf(base)&&(a=a.substr(base.length)),hashbang&&(a=a.replace("#!","")),base&&o===a||(e.preventDefault(),page.show(o))}}}}function which(e){return e=e||window.event,null===e.which?e.button:e.which}function sameOrigin(e){var t=location.protocol+"//"+location.hostname;return location.port&&(t+=":"+location.port),e&&0===e.indexOf(t)}var pathtoRegexp=require("path-to-regexp");module.exports=page;var clickEvent="undefined"!=typeof document&&document.ontouchstart?"touchstart":"click",location="undefined"!=typeof window&&(window.history.location||window.location),dispatch=!0,decodeURLComponents=!0,base="",running,hashbang=!1,prevContext;page.callbacks=[],page.exits=[],page.current="",page.len=0,page.base=function(e){return 0===arguments.length?base:void(base=e)},page.start=function(e){if(e=e||{},!running&&(running=!0,!1===e.dispatch&&(dispatch=!1),!1===e.decodeURLComponents&&(decodeURLComponents=!1),!1!==e.popstate&&window.addEventListener("popstate",onpopstate,!1),!1!==e.click&&document.addEventListener(clickEvent,onclick,!1),!0===e.hashbang&&(hashbang=!0),dispatch)){var t=hashbang&&~location.hash.indexOf("#!")?location.hash.substr(2)+location.search:location.pathname+location.search+location.hash;page.replace(t,null,!0,dispatch)}},page.stop=function(){running&&(page.current="",page.len=0,running=!1,document.removeEventListener(clickEvent,onclick,!1),window.removeEventListener("popstate",onpopstate,!1))},page.show=function(e,t,n,a){var o=new Context(e,t);return page.current=o.path,!1!==n&&page.dispatch(o),!1!==o.handled&&!1!==a&&o.pushState(),o},page.back=function(e,t){page.len>0?(history.back(),page.len--):e?setTimeout(function(){page.show(e,t)}):setTimeout(function(){page.show(base,t)})},page.redirect=function(e,t){"string"==typeof e&&"string"==typeof t&&page(e,function(e){setTimeout(function(){page.replace(t)},0)}),"string"==typeof e&&"undefined"==typeof t&&setTimeout(function(){page.replace(e)},0)},page.replace=function(e,t,n,a){var o=new Context(e,t);return page.current=o.path,o.init=n,o.save(),!1!==a&&page.dispatch(o),o},page.dispatch=function(e){function t(){var e=page.exits[i++];return e?void e(a,t):n()}function n(){var t=page.callbacks[o++];return e.path!==page.current?void(e.handled=!1):t?void t(e,n):unhandled(e)}var a=prevContext,o=0,i=0;prevContext=e,a?t():n()},page.exit=function(e,t){if("function"==typeof e)return page.exit("*",e);for(var n=new Route(e),a=1;a<arguments.length;++a)page.exits.push(n.middleware(arguments[a]))},page.Context=Context,Context.prototype.pushState=function(){page.len++,history.pushState(this.state,this.title,hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},Context.prototype.save=function(){history.replaceState(this.state,this.title,hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},page.Route=Route,Route.prototype.middleware=function(e){var t=this;return function(n,a){return t.match(n.path,n.params)?e(n,a):void a()}},Route.prototype.match=function(e,t){var n=this.keys,a=e.indexOf("?"),o=~a?e.slice(0,a):e,i=this.regexp.exec(decodeURIComponent(o));if(!i)return!1;for(var s=1,r=i.length;r>s;++s){var h=n[s-1],p=decodeURLEncodedURIComponent(i[s]);void 0===p&&hasOwnProperty.call(t,h.name)||(t[h.name]=p)}return!0};var onpopstate=function(){var e=!1;if("undefined"!=typeof window)return"complete"===document.readyState?e=!0:window.addEventListener("load",function(){setTimeout(function(){e=!0},0)}),function(t){if(e)if(t.state){var n=t.state.path;page.replace(n,t.state)}else page.show(location.pathname+location.hash,void 0,void 0,!1)}}();page.sameOrigin=sameOrigin;

}).call(this,require('_process'))
},{"_process":1,"path-to-regexp":15}],15:[function(require,module,exports){
function parse(e){for(var t,r=[],n=0,o=0,p="";null!=(t=PATH_REGEXP.exec(e));){var a=t[0],i=t[1],s=t.index;if(p+=e.slice(o,s),o=s+a.length,i)p+=i[1];else{p&&(r.push(p),p="");var u=t[2],c=t[3],l=t[4],f=t[5],g=t[6],x=t[7],h="+"===g||"*"===g,m="?"===g||"*"===g,y=u||"/",T=l||f||(x?".*":"[^"+y+"]+?");r.push({name:c||n++,prefix:u||"",delimiter:y,optional:m,repeat:h,pattern:escapeGroup(T)})}}return o<e.length&&(p+=e.substr(o)),p&&r.push(p),r}function compile(e){return tokensToFunction(parse(e))}function tokensToFunction(e){for(var t=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=new RegExp("^"+e[r].pattern+"$"));return function(r){for(var n="",o=r||{},p=0;p<e.length;p++){var a=e[p];if("string"!=typeof a){var i,s=o[a.name];if(null==s){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(isarray(s)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+s+'"');if(0===s.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var u=0;u<s.length;u++){if(i=encodeURIComponent(s[u]),!t[p].test(i))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+i+'"');n+=(0===u?a.prefix:a.delimiter)+i}}else{if(i=encodeURIComponent(s),!t[p].test(i))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+i+'"');n+=a.prefix+i}}else n+=a}return n}}function escapeString(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function escapeGroup(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function attachKeys(e,t){return e.keys=t,e}function flags(e){return e.sensitive?"":"i"}function regexpToRegexp(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return attachKeys(e,t)}function arrayToRegexp(e,t,r){for(var n=[],o=0;o<e.length;o++)n.push(pathToRegexp(e[o],t,r).source);var p=new RegExp("(?:"+n.join("|")+")",flags(r));return attachKeys(p,t)}function stringToRegexp(e,t,r){for(var n=parse(e),o=tokensToRegExp(n,r),p=0;p<n.length;p++)"string"!=typeof n[p]&&t.push(n[p]);return attachKeys(o,t)}function tokensToRegExp(e,t){t=t||{};for(var r=t.strict,n=t.end!==!1,o="",p=e[e.length-1],a="string"==typeof p&&/\/$/.test(p),i=0;i<e.length;i++){var s=e[i];if("string"==typeof s)o+=escapeString(s);else{var u=escapeString(s.prefix),c=s.pattern;s.repeat&&(c+="(?:"+u+c+")*"),c=s.optional?u?"(?:"+u+"("+c+"))?":"("+c+")?":u+"("+c+")",o+=c}}return r||(o=(a?o.slice(0,-2):o)+"(?:\\/(?=$))?"),o+=n?"$":r&&a?"":"(?=\\/|$)",new RegExp("^"+o,flags(t))}function pathToRegexp(e,t,r){return t=t||[],isarray(t)?r||(r={}):(r=t,t=[]),e instanceof RegExp?regexpToRegexp(e,t,r):isarray(e)?arrayToRegexp(e,t,r):stringToRegexp(e,t,r)}var isarray=require("isarray");module.exports=pathToRegexp,module.exports.parse=parse,module.exports.compile=compile,module.exports.tokensToFunction=tokensToFunction,module.exports.tokensToRegExp=tokensToRegExp;var PATH_REGEXP=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");

},{"isarray":16}],16:[function(require,module,exports){
module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};

},{}],17:[function(require,module,exports){
!function(t,e){"use strict";function n(t,e,n){var r={};return r[t.key]=e,t.pos&&(r[t.pos]=n),r}function r(t,e){for(var n,r=e.length,o=t.length;r>o;)n=e[--r],e.splice(r,1),n.unmount()}function o(t,e){Object.keys(t.tags).forEach(function(n){var r=t.tags[n];O(r)?g(r,function(t){_(t,n,e)}):_(r,n,e)})}function i(t,e,n){var r,o=t._root;for(t._virts=[];o;)r=o.nextSibling,n?e.insertBefore(o,n._root):e.appendChild(o),t._virts.push(o),o=r}function u(t,e,n,r){for(var o,i=t._root,u=0;r>u;u++)o=i.nextSibling,e.insertBefore(i,n._root),i=o}function a(t,e,a){v(t,"each");var f,c=typeof y(t,"no-reorder")!==G||v(t,"no-reorder"),l=L(t),p=V[l]||{tmpl:t.outerHTML},d=W.test(l),g=t.parentNode,h=document.createTextNode(""),m=x(t),b=/option/gi.test(l),w=[],_=[],N="VIRTUAL"==t.tagName;a=rt.loopKeys(a),g.insertBefore(h,t),e.one("before-mount",function(){t.parentNode.removeChild(t),g.stub&&(g=e.root)}).on("update",function(){var v=rt(a.val,e),y=document.createDocumentFragment();O(v)||(f=v||!1,v=f?Object.keys(v).map(function(t){return n(a,t,v[t])}):[]),v.forEach(function(r,h){var v=c&&r instanceof Object,b=_.indexOf(r),x=~b&&v?b:h,C=w[x];r=!f&&a.key?n(a,r,h):r,!v&&!C||v&&!~b||!C?(C=new s(p,{parent:e,isLoop:!0,hasImpl:!!V[l],root:d?g:t.cloneNode(),item:r},t.innerHTML),C.mount(),N&&(C._root=C.root.firstChild),h==w.length?N?i(C,y):y.appendChild(C.root):(N?i(C,g,w[h]):g.insertBefore(C.root,w[h].root),_.splice(h,0,r)),w.splice(h,0,C),x=h):C.update(r),x!==h&&v&&(N?u(C,g,w[h],t.childNodes.length):g.insertBefore(C.root,w[h].root),a.pos&&(C[a.pos]=h),w.splice(h,0,w.splice(x,1)[0]),_.splice(h,0,_.splice(x,1)[0]),m||o(C,h)),C._item=r,E(C,"_parent",e)},!0),r(v,w),b?g.appendChild(y):g.insertBefore(y,h),m&&(e.tags[l]=w),_=v.slice()})}function f(t,e,n,r){j(t,function(t){if(1==t.nodeType){if(t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||y(t,"each")?1:0,n){var o=x(t);o&&!t.isLoop&&n.push(N(o,{root:t,parent:e},t.innerHTML,e))}(!t.isLoop||r)&&K(t,e,[])}})}function c(t,e,n){function r(t,e,r){rt.hasExpr(e)&&n.push(S({dom:t,expr:e},r))}j(t,function(t){var n,o=t.nodeType;return 3==o&&"STYLE"!=t.parentNode.tagName&&r(t,t.nodeValue),1==o?(n=y(t,"each"))?(a(t,e,n),!1):(g(t.attributes,function(e){var n=e.name,o=n.split("__")[1];return r(t,e.value,{attr:o||n,bool:o}),o?(v(t,n),!1):void 0}),x(t)?!1:void 0):void 0})}function s(t,n,r){function o(){var t=w&&x?l:y||l;g(j.attributes,function(e){var n=e.value;p[m(e.name)]=rt.hasExpr(n)?rt(n,t):n}),g(Object.keys(H),function(e){p[m(e)]=rt(H[e],t)})}function i(t){for(var e in _)typeof l[e]!==Y&&M(l,e)&&(l[e]=t[e])}function u(){l.parent&&x&&g(Object.keys(l.parent),function(t){var e=!T(tt,t)&&T(B,t);(typeof l[t]===Y||e)&&(e||B.push(t),l[t]=l.parent[t])})}function a(t){if(g(L,function(e){e[t?"mount":"unmount"]()}),y){var e=t?"on":"off";x?y[e]("unmount",l.unmount):y[e]("update",l.update)[e]("unmount",l.unmount)}}var s,l=q.observable(this),p=F(n.opts)||{},y=n.parent,x=n.isLoop,w=n.hasImpl,_=A(n.item),N=[],L=[],j=n.root,k=t.fn,I=j.tagName.toLowerCase(),H={},B=[];k&&j._tag&&j._tag.unmount(!0),this.isMounted=!1,j.isLoop=x,j._tag=this,E(this,"_riot_id",++z),S(this,{parent:y,root:j,opts:p,tags:{}},_),g(j.attributes,function(t){var e=t.value;rt.hasExpr(e)&&(H[t.name]=e)}),s=ot(t.tmpl,r),E(this,"update",function(t){return t=A(t),u(),t&&typeof _===X&&(i(t),_=t),S(l,t),o(),l.trigger("update",t),d(N,l),ut(function(){l.trigger("updated")}),this}),E(this,"mixin",function(){return g(arguments,function(t){var e;t=typeof t===G?q.mixin(t):t,h(t)?(e=new t,t=t.prototype):e=t,g(Object.getOwnPropertyNames(t),function(t){"init"!=t&&(l[t]=h(e[t])?e[t].bind(l):e[t])}),e.init&&e.init.bind(l)()}),this}),E(this,"mount",function(){if(o(),k&&k.call(l,p),c(s,l,N),a(!0),(t.attrs||w)&&(R(t.attrs,function(t,e){b(j,t,e)}),c(l.root,l,N)),(!l.parent||x)&&l.update(_),l.trigger("before-mount"),x&&!w)l.root=j=s.firstChild;else{for(;s.firstChild;)j.appendChild(s.firstChild);j.stub&&(l.root=j=y.root)}x&&f(l.root,l.parent,null,!0),!l.parent||l.parent.isMounted?(l.isMounted=!0,l.trigger("mount")):l.parent.one("mount",function(){$(l.root)||(l.parent.isMounted=l.isMounted=!0,l.trigger("mount"))})}),E(this,"unmount",function(t){var n,r=j,o=r.parentNode;if(l.trigger("before-unmount"),U.splice(U.indexOf(l),1),this._virts&&g(this._virts,function(t){t.parentNode.removeChild(t)}),o){if(y)n=C(y),O(n.tags[I])?g(n.tags[I],function(t,e){t._riot_id==l._riot_id&&n.tags[I].splice(e,1)}):n.tags[I]=e;else for(;r.firstChild;)r.removeChild(r.firstChild);t?v(o,"riot-tag"):o.removeChild(r)}l.trigger("unmount"),a(),l.off("*"),l.isMounted=!1,delete j._tag}),f(s,this,L)}function l(e,n,r,o){r[e]=function(e){var i,u=o._parent,a=o._item;if(!a)for(;u&&!a;)a=u._item,u=u._parent;e=e||t.event,M(e,"currentTarget")&&(e.currentTarget=r),M(e,"target")&&(e.target=e.srcElement),M(e,"which")&&(e.which=e.charCode||e.keyCode),e.item=a,n.call(o,e)===!0||/radio|check/.test(r.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),e.preventUpdate||(i=a?C(u):o,i.update())}}function p(t,e,n){t&&(t.insertBefore(n,e),t.removeChild(e))}function d(t,e){g(t,function(t,n){var r=t.dom,o=t.attr,i=rt(t.expr,e),u=t.dom.parentNode;if(t.bool?i=i?o:!1:null==i&&(i=""),u&&"TEXTAREA"==u.tagName&&(i=(""+i).replace(/riot-/g,""),u.value=i),t.value!==i){if(t.value=i,!o)return void(r.nodeValue=""+i);if(v(r,o),h(i))l(o,i,r,e);else if("if"==o){var a=t.stub,f=function(){p(a.parentNode,a,r)},c=function(){p(r.parentNode,r,a)};i?a&&(f(),r.inStub=!1,$(r)||j(r,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(a=t.stub=a||document.createTextNode(""),r.parentNode?c():(e.parent||e).one("updated",c),r.inStub=!0)}else if(/^(show|hide)$/.test(o))"hide"==o&&(i=!i),r.style.display=i?"":"none";else if("value"==o)r.value=i;else if(P(o,Z)&&o!=Q)i&&b(r,o.slice(Z.length),i);else{if(t.bool&&(r[o]=i,!i))return;(0===i||i&&typeof i!==X)&&b(r,o,i)}}})}function g(t,e){for(var n,r=0,o=(t||[]).length;o>r;r++)n=t[r],null!=n&&e(n,r)===!1&&r--;return t}function h(t){return typeof t===J||!1}function v(t,e){t.removeAttribute(e)}function m(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function y(t,e){return t.getAttribute(e)}function b(t,e,n){t.setAttribute(e,n)}function x(t){return t.tagName&&V[y(t,Q)||t.tagName.toLowerCase()]}function w(t,e,n){var r=n.tags[e];r?(O(r)||r!==t&&(n.tags[e]=[r]),T(n.tags[e],t)||n.tags[e].push(t)):n.tags[e]=t}function _(t,e,n){var r,o=t.parent;o&&(r=o.tags[e],O(r)?r.splice(n,0,r.splice(r.indexOf(t),1)[0]):w(t,e,o))}function N(t,e,n,r){var o=new s(t,e,n),i=L(e.root),u=C(r);return o.parent=u,o._parent=r,w(o,i,u),u!==r&&w(o,i,r),e.root.innerHTML="",o}function C(t){for(var e=t;!x(e.root)&&e.parent;)e=e.parent;return e}function E(t,e,n,r){return Object.defineProperty(t,e,S({value:n,enumerable:!1,writable:!1,configurable:!1},r)),t}function L(t){var e=x(t),n=y(t,"name"),r=n&&!rt.hasExpr(n)?n:e?e.name:t.tagName.toLowerCase();return r}function S(t){for(var e,n=arguments,r=1;r<n.length;++r)if(e=n[r])for(var o in e)M(t,o)&&(t[o]=e[o]);return t}function T(t,e){return~t.indexOf(e)}function O(t){return Array.isArray(t)||t instanceof Array}function M(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return typeof t[e]===Y||n&&n.writable}function A(t){if(!(t instanceof s||t&&typeof t.trigger==J))return t;var e={};for(var n in t)T(tt,n)||(e[n]=t[n]);return e}function j(t,e){if(t){if(e(t)===!1)return;for(t=t.firstChild;t;)j(t,e),t=t.nextSibling}}function R(t,e){for(var n,r=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;n=r.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function $(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function k(t){return document.createElement(t)}function I(t,e){return(e||document).querySelectorAll(t)}function H(t,e){return(e||document).querySelector(t)}function F(t){function e(){}return e.prototype=t,new e}function B(t){return y(t,"id")||y(t,"name")}function K(t,e,n){var r,o=B(t),i=function(i){T(n,o)||(r=O(i),i?(!r||r&&!T(i,t))&&(r?i.push(t):e[o]=[i,t]):e[o]=t)};o&&(rt.hasExpr(o)?e.one("mount",function(){o=B(t),i(e[o])}):i(e[o]))}function P(t,e){return t.slice(0,e.length)===e}function D(t,e,n){var r=V[e],o=t._innerHTML=t._innerHTML||t.innerHTML;return t.innerHTML="",r&&t&&(r=new s(r,{root:t,opts:n},o)),r&&r.mount&&(r.mount(),T(U,r)||U.push(r)),r}var q={version:"v2.3.13",settings:{}},z=0,U=[],V={},Z="riot-",Q=Z+"tag",G="string",X="object",Y="undefined",J="function",W=/^(?:opt(ion|group)|tbody|col|t[rhd])$/,tt=["_item","_id","_parent","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],et=0|(t&&t.document||{}).documentMode;q.observable=function(t){t=t||{};var e={},n=Array.prototype.slice,r=function(t,e){t.replace(/\S+/g,e)},o=function(e,n){Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!1,configurable:!1})};return o("on",function(n,o){return"function"!=typeof o?t:(r(n,function(t,n){(e[t]=e[t]||[]).push(o),o.typed=n>0}),t)}),o("off",function(n,o){return"*"!=n||o?r(n,function(t){if(o)for(var n,r=e[t],i=0;n=r&&r[i];++i)n==o&&r.splice(i--,1);else delete e[t]}):e={},t}),o("one",function(e,n){function r(){t.off(e,r),n.apply(t,arguments)}return t.on(e,r)}),o("trigger",function(o){var i,u=n.call(arguments,1);return r(o,function(r){i=n.call(e[r]||[],0);for(var o,a=0;o=i[a];++a){if(o.busy)return;o.busy=1,o.apply(t,o.typed?[r].concat(u):u),i[a]!==o&&a--,o.busy=0}e["*"]&&"*"!=r&&t.trigger.apply(t,["*",r].concat(u))}),t}),t},function(e){function n(t){return t.split(/[/?#]/)}function r(t,e){var n=new RegExp("^"+e[C](/\*/g,"([^/?#]+?)")[C](/\.\./,".*")+"$"),r=t.match(n);return r?r.slice(1):void 0}function o(t,e){var n;return function(){clearTimeout(n),n=setTimeout(t,e)}}function i(t){g=o(l,1),O[_](E,g),O[_](L,g),M[_]($,p),t&&l(!0)}function u(){this.$=[],e.observable(this),I.on("stop",this.s.bind(this)),I.on("emit",this.e.bind(this))}function a(t){return t[C](/^\/|\/$/,"")}function f(t){return"string"==typeof t}function c(t){return(t||j.href||"")[C](b,"")}function s(t){return"#"==h[0]?(t||j.href||"").split(h)[1]||"":c(t)[C](h,"")}function l(t){var e=0==B;if(!(B>=T)&&(B++,F.push(function(){var e=s();(t||e!=v)&&(I[S]("emit",e),v=e)}),e)){for(;F.length;)F[0](),F.shift();B=0}}function p(t){if(!(1!=t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var e=t.target;e&&"A"!=e.nodeName;)e=e.parentNode;!e||"A"!=e.nodeName||e[N]("download")||!e[N]("href")||e.target&&"_self"!=e.target||-1==e.href.indexOf(j.href.match(b)[0])||(e.href==j.href||e.href.split("#")[0]!=j.href.split("#")[0]&&("#"==h||0===c(e.href).indexOf(h))&&d(s(e.href),e.title||M.title))&&t.preventDefault()}}function d(t,e,n){return A?(t=h+a(t),e=e||M.title,n?A.replaceState(null,e,t):A.pushState(null,e,t),M.title=e,H=!1,l(),H):I[S]("emit",s(t))}var g,h,v,m,y,b=/^.+?\/+[^\/]+/,x="EventListener",w="remove"+x,_="add"+x,N="hasAttribute",C="replace",E="popstate",L="hashchange",S="trigger",T=3,O="undefined"!=typeof t&&t,M="undefined"!=typeof document&&document,A=O&&history,j=O&&(A.location||O.location),R=u.prototype,$=M&&M.ontouchstart?"touchstart":"click",k=!1,I=e.observable(),H=!1,F=[],B=0;R.m=function(t,e,n){!f(t)||e&&!f(e)?e?this.r(t,e):this.r("@",t):d(t,e,n||!1)},R.s=function(){this.off("*"),this.$=[]},R.e=function(t){this.$.concat("@").some(function(e){var n=("@"==e?m:y)(a(t),a(e));return"undefined"!=typeof n?(this[S].apply(null,[e].concat(n)),H=!0):void 0},this)},R.r=function(t,e){"@"!=t&&(t="/"+a(t),this.$.push(t)),this.on(t,e)};var K=new u,P=K.m.bind(K);P.create=function(){var t=new u;return t.m.stop=t.s.bind(t),t.m.bind(t)},P.base=function(t){h=t||"#",v=s()},P.exec=function(){l(!0)},P.parser=function(t,e){t||e||(m=n,y=r),t&&(m=t),e&&(y=e)},P.query=function(){var t={},e=j.href||v;return e[C](/[?&](.+?)=([^&]*)/g,function(e,n,r){t[n]=r}),t},P.stop=function(){k&&(O&&(O[w](E,g),O[w](L,g),M[w]($,p)),I[S]("stop"),k=!1)},P.start=function(t){k||(O&&("complete"==document.readyState?i(t):O[_]("load",function(){setTimeout(function(){i(t)},1)})),k=!0)},P.base(),P.parser(),e.route=P}(q);var nt=function(t){function e(t){return t}function n(t,e){return e||(e=h),new RegExp(t.source.replace(/{/g,e[2]).replace(/}/g,e[3]),t.global?f:"")}function r(t){var r,o=t.split(" ");if(t===p)o[2]=o[0],o[3]=o[1],r=e;else{if(2!==o.length||/[\x00-\x1F<>a-zA-Z0-9'",;\\]/.test(t))throw new Error('Unsupported brackets "'+t+'"');o=o.concat(t.replace(/(?=[[\]()*+?.^$|])/g,"\\").split(" ")),r=n}return o[4]=r(o[1].length>1?/{[\S\s]*?}/:/{[^}]*}/,o),o[5]=r(/\\({|})/g,o),o[6]=r(/(\\?)({)/g,o),o[7]=RegExp("(\\\\?)(?:([[({])|("+o[3]+"))|"+l,f),o[8]=t,o}function o(t){t||(t=p),t!==h[8]&&(h=r(t),a=t===p?e:n,h[9]=a(/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/),h[10]=a(/(^|[^\\]){=[\S\s]*?}/),i._rawOffset=h[0].length),g=t}function i(t){return t instanceof RegExp?a(t):h[t]}function u(t){var e;t=t||{},e=t.brackets,Object.defineProperty(t,"brackets",{set:o,get:function(){return g},enumerable:!0}),v=t,o(e)}var a,f="g",c=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,s=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,l=s.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,p="{ }",d={"(":RegExp("([()])|"+l,f),"[":RegExp("([[\\]])|"+l,f),"{":RegExp("([{}])|"+l,f)},g=t,h=[];i.split=function(t,e,n){function r(t){e||u?c.push(t&&t.replace(n[5],"$1")):c.push(t)}function o(e,n){var r,o=d[e],i=1;for(o.lastIndex=n;(r=o.exec(t))&&(!r[1]||(r[1]===e?++i:--i)););return r?o.lastIndex:t.length}n||(n=h);var i,u,a,f,c=[],s=n[6];for(u=a=s.lastIndex=0;i=s.exec(t);){if(f=i.index,u){if(i[2]){s.lastIndex=o(i[2],s.lastIndex);continue}if(!i[3])continue}i[1]||(r(t.slice(a,f)),a=s.lastIndex,s=n[6+(u^=1)],s.lastIndex=a)}return t&&a<t.length&&r(t.slice(a)),c},i.hasExpr=function(t){return i(4).test(t)},i.loopKeys=function(t){var e=t.match(i(9));return e?{key:e[1],pos:e[2],val:h[0]+e[3].trim()+h[1]}:{val:t.trim()}},i.array=function(t){return r(t||g)};var v;return Object.defineProperty(i,"settings",{set:u,get:function(){return v}}),i.settings="undefined"!=typeof q&&q.settings||{},i.set=o,i.R_STRINGS=s,i.R_MLCOMMS=c,i.S_QBLOCKS=l,i}(),rt=function(){function e(t,e){return t?(a[t]||(a[t]=r(t))).call(e,n):t}function n(t,n){e.errorHandler&&(t.riotData={tagName:n&&n.root&&n.root.tagName,_riot_id:n&&n._riot_id},e.errorHandler(t))}function r(t){var e=o(t);return"try{return "!==e.slice(0,11)&&(e="return "+e),new Function("E",e+";")}function o(t){var e,n=[],r=nt.split(t.replace(/\u2057/g,'"'),1);if(r.length>2||r[0]){var o,u,a=[];for(o=u=0;o<r.length;++o)e=r[o],e&&(e=1&o?i(e,1,n):'"'+e.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(a[u++]=e);e=2>u?a[0]:"["+a.join(",")+'].join("")'}else e=i(r[1],0,n);return n[0]&&(e=e.replace(c,function(t,e){return n[e].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),e}function i(t,e,n){function r(e,n){var r,o=1,i="("===e?/[()]/g:"["===e?/[[\]]/g:/[{}]/g;for(i.lastIndex=n.lastIndex;r=i.exec(t);)if(r[0]===e)++o;else if(!--o)break;n.lastIndex=o?t.length:i.lastIndex}if("="===t[0]&&(t=t.slice(1)),t=t.replace(f,function(t,e){return t.length>2&&!e?""+(n.push(t)-1)+"~":t}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var o,i=[],a=0;t&&(o=t.match(s))&&!o.index;){var c,l,p=/,|([[{(])|$/g;for(t=RegExp.rightContext,c=o[2]?n[o[2]].slice(1,-1).trim().replace(/\s+/g," "):o[1];l=(o=p.exec(t))[1];)r(l,p);l=t.slice(0,o.index),t=RegExp.rightContext,i[a++]=u(l,1,c)}t=a?a>1?"["+i.join(",")+'].join(" ").trim()':i[0]:u(t,e)}return t}function u(t,e,n){var r;return t=t.replace(p,function(t,e,n,o,i){return n&&(o=r?0:o+t.length,"this"!==n&&"global"!==n&&"window"!==n?(t=e+'("'+n+l+n,o&&(r="."===(i=i[o])||"("===i||"["===i)):o&&(r=!d.test(i.slice(o)))),t}),r&&(t="try{return "+t+"}catch(e){E(e,this)}"),n?t=(r?"function(){"+t+"}.call(this)":"("+t+")")+'?"'+n+'":""':e&&(t="function(v){"+(r?t.replace("return ","v="):"v=("+t+")")+';return v||v===0?v:""}.call(this)'),t}var a={};e.isRaw=function(t){return"="===t[nt._rawOffset]},e.haveRaw=function(t){return nt(10).test(t)},e.hasExpr=nt.hasExpr,e.loopKeys=nt.loopKeys,e.errorHandler=null;var f=RegExp(nt.S_QBLOCKS,"g"),c=/\x01(\d+)~/g,s=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\x01(\d+)~):/,l='"in this?this:'+("object"!=typeof t?"global":"window")+").",p=/[,{][$\w]+:|(^ *|[^$\w\.])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,d=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return e.parse=function(t){return t},e}();rt.version=nt.version="v2.3.20";var ot=function(t){function e(e,i){var a=e&&e.match(/^\s*<([-\w]+)/),f=a&&a[1].toLowerCase(),c=o[f]||u,s=k(c);return s.stub=!0,i&&(e=r(e,i)),t&&f&&(a=f.match(W))?n(s,e,f,!!a[1]):s.innerHTML=e,s}function n(t,e,n,r){var o,i=k(u),a=r?"select>":"table>";i.innerHTML="<"+a+e+"</"+a,o=H(n,i),o&&t.appendChild(o)}function r(t,e){if(!/<yield\b/i.test(t))return t;var n=0;return t=t.replace(/<yield\s+from=['"]([-\w]+)['"]\s*(?:\/>|>\s*<\/yield\s*>)/gi,function(t,r){var o=e.match(RegExp(i.replace("@",r),"i"));return++n,o&&o[2]||""}),n?t:t.replace(/<yield\s*(?:\/>|>\s*<\/yield\s*>)/gi,e||"")}var o={tr:"tbody",th:"tr",td:"tr",tbody:"table",col:"colgroup"},i=/<yield\s+to=(['"])?@\1\s*>([\S\s]+?)<\/yield\s*>/.source,u="div";return t=t&&10>t,e}(et),it=function(e){if(!t)return{add:function(){},inject:function(){}};var n=function(){var t=k("style");b(t,"type","text/css");var e=H("style[type=riot]");return e?(e.id&&(t.id=e.id),e.parentNode.replaceChild(t,e)):document.getElementsByTagName("head")[0].appendChild(t),t}(),r=n.styleSheet,o="";return Object.defineProperty(e,"styleNode",{value:n,writable:!0}),{add:function(t){o+=t},inject:function(){o&&(r?r.cssText+=o:n.innerHTML+=o,o="")}}}(q),ut=function(t){var e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame;if(!e||/iP(ad|hone|od).*OS 6/.test(t.navigator.userAgent)){var n=0;e=function(t){var e=Date.now(),r=Math.max(16-(e-n),0);setTimeout(function(){t(n=e+r)},r)}}return e}(t||{});q.util={brackets:nt,tmpl:rt},q.mixin=function(){var t={};return function(e,n){return n?void(t[e]=n):t[e]}}(),q.tag=function(t,e,n,r,o){return h(r)&&(o=r,/^[\w\-]+\s?=/.test(n)?(r=n,n=""):r=""),n&&(h(n)?o=n:it.add(n)),V[t]={name:t,tmpl:e,attrs:r,fn:o},t},q.tag2=function(t,e,n,r,o,i){return n&&it.add(n),V[t]={name:t,tmpl:e,attrs:r,fn:o},t},q.mount=function(t,e,n){function r(t){var e="";return g(t,function(t){/[^-\w]/.test(t)||(e+=",*["+Q+"="+t.trim()+"]")}),e}function o(){var t=Object.keys(V);return t+r(t)}function i(t){var r;if(t.tagName){!e||(r=y(t,Q))&&r==e||b(t,Q,e);var o=D(t,e||t.getAttribute(Q)||t.tagName.toLowerCase(),n);o&&f.push(o)}else t.length&&g(t,i)}var u,a,f=[];if(it.inject(),typeof e===X&&(n=e,e=0),typeof t===G?("*"===t?t=a=o():t+=r(t.split(",")),u=t?I(t):[]):u=t,"*"===e){if(e=a||o(),u.tagName)u=I(e,u);else{var c=[];g(u,function(t){c.push(I(e,t))}),u=c}e=0}return u.tagName?i(u):g(u,i),f},q.update=function(){return g(U,function(t){t.update()})},q.Tag=s,typeof exports===X?module.exports=q:typeof define===J&&typeof define.amd!==Y?define(function(){return q}):t.riot=q}("undefined"!=typeof window?window:void 0);

},{}],18:[function(require,module,exports){
function noop(){}function isHost(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function isObject(t){return t===Object(t)}function serialize(t){if(!isObject(t))return t;var e=[];for(var r in t)null!=t[r]&&pushEncodedKeyValuePair(e,r,t[r]);return e.join("&")}function pushEncodedKeyValuePair(t,e,r){return Array.isArray(r)?r.forEach(function(r){pushEncodedKeyValuePair(t,e,r)}):void t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}function parseString(t){for(var e,r,s={},i=t.split("&"),n=0,o=i.length;o>n;++n)r=i[n],e=r.split("="),s[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return s}function parseHeader(t){var e,r,s,i,n=t.split(/\r?\n/),o={};n.pop();for(var u=0,a=n.length;a>u;++u)r=n[u],e=r.indexOf(":"),s=r.slice(0,e).toLowerCase(),i=trim(r.slice(e+1)),o[s]=i;return o}function isJSON(t){return/[\/+]json\b/.test(t)}function type(t){return t.split(/ *; */).shift()}function params(t){return reduce(t.split(/ *; */),function(t,e){var r=e.split(/ *= */),s=r.shift(),i=r.shift();return s&&i&&(t[s]=i),t},{})}function Response(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function Request(t,e){var r=this;Emitter.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new Response(r)}catch(s){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=s,t.rawResponse=r.xhr&&r.xhr.responseText?r.xhr.responseText:null,r.callback(t)}if(r.emit("response",e),t)return r.callback(t,e);if(e.status>=200&&e.status<300)return r.callback(t,e);var i=new Error(e.statusText||"Unsuccessful HTTP response");i.original=t,i.response=e,i.status=e.status,r.callback(i,e)})}function request(t,e){return"function"==typeof e?new Request("GET",t).end(e):1==arguments.length?new Request("GET",t):new Request(t,e)}function del(t,e){var r=request("DELETE",t);return e&&r.end(e),r}var Emitter=require("emitter"),reduce=require("reduce"),root;root="undefined"!=typeof window?window:"undefined"!=typeof self?self:this,request.getXHR=function(){if(!(!root.XMLHttpRequest||root.location&&"file:"==root.location.protocol&&root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var trim="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},Response.prototype.get=function(t){return this.header[t.toLowerCase()]},Response.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=type(e);var r=params(e);for(var s in r)this[s]=r[s]},Response.prototype.parseBody=function(t){var e=request.parse[this.type];return e&&t&&(t.length||t instanceof Object)?e(t):null},Response.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},Response.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,s="cannot "+e+" "+r+" ("+this.status+")",i=new Error(s);return i.status=this.status,i.method=e,i.url=r,i},request.Response=Response,Emitter(Request.prototype),Request.prototype.use=function(t){return t(this),this},Request.prototype.timeout=function(t){return this._timeout=t,this},Request.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},Request.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},Request.prototype.set=function(t,e){if(isObject(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},Request.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},Request.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},Request.prototype.type=function(t){return this.set("Content-Type",request.types[t]||t),this},Request.prototype.parse=function(t){return this._parser=t,this},Request.prototype.accept=function(t){return this.set("Accept",request.types[t]||t),this},Request.prototype.auth=function(t,e){var r=btoa(t+":"+e);return this.set("Authorization","Basic "+r),this},Request.prototype.query=function(t){return"string"!=typeof t&&(t=serialize(t)),t&&this._query.push(t),this},Request.prototype.field=function(t,e){return this._formData||(this._formData=new root.FormData),this._formData.append(t,e),this},Request.prototype.attach=function(t,e,r){return this._formData||(this._formData=new root.FormData),this._formData.append(t,e,r),this},Request.prototype.send=function(t){var e=isObject(t),r=this.getHeader("Content-Type");if(e&&isObject(this._data))for(var s in t)this._data[s]=t[s];else"string"==typeof t?(r||this.type("form"),r=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==r?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return!e||isHost(t)?this:(r||this.type("json"),this)},Request.prototype.callback=function(t,e){var r=this._callback;this.clearTimeout(),r(t,e)},Request.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},Request.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},Request.prototype.withCredentials=function(){return this._withCredentials=!0,this},Request.prototype.end=function(t){var e=this,r=this.xhr=request.getXHR(),s=this._query.join("&"),i=this._timeout,n=this._formData||this._data;this._callback=t||noop,r.onreadystatechange=function(){if(4==r.readyState){var t;try{t=r.status}catch(s){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var o=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.emit("progress",t)};this.hasListeners("progress")&&(r.onprogress=o);try{r.upload&&this.hasListeners("progress")&&(r.upload.onprogress=o)}catch(u){}if(i&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},i)),s&&(s=request.serializeObject(s),this.url+=~this.url.indexOf("?")?"&"+s:"?"+s),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!isHost(n)){var a=this.getHeader("Content-Type"),h=this._parser||request.serialize[a?a.split(";")[0]:""];!h&&isJSON(a)&&(h=request.serialize["application/json"]),h&&(n=h(n))}for(var p in this.header)null!=this.header[p]&&r.setRequestHeader(p,this.header[p]);return this.emit("request",this),r.send("undefined"!=typeof n?n:null),this},Request.prototype.then=function(t,e){return this.end(function(r,s){r?e(r):t(s)})},request.Request=Request,request.get=function(t,e,r){var s=request("GET",t);return"function"==typeof e&&(r=e,e=null),e&&s.query(e),r&&s.end(r),s},request.head=function(t,e,r){var s=request("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.del=del,request["delete"]=del,request.patch=function(t,e,r){var s=request("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.post=function(t,e,r){var s=request("POST",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.put=function(t,e,r){var s=request("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},module.exports=request;

},{"emitter":19,"reduce":20}],19:[function(require,module,exports){
function Emitter(t){return t?mixin(t):void 0}function mixin(t){for(var e in Emitter.prototype)t[e]=Emitter.prototype[e];return t}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},Emitter.prototype.once=function(t,e){function i(){r.off(t,i),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,s=0;s<i.length;s++)if(r=i[s],r===e||r.fn===e){i.splice(s,1);break}return this},Emitter.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var r=0,s=i.length;s>r;++r)i[r].apply(this,e)}return this},Emitter.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},Emitter.prototype.hasListeners=function(t){return!!this.listeners(t).length};

},{}],20:[function(require,module,exports){
module.exports=function(l,n,e){for(var r=0,t=l.length,u=3==arguments.length?e:l[r++];t>r;)u=n.call(null,u,l[r],++r,l);return u};

},{}]},{},[2]);
